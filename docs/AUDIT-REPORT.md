# –û—Ç—á—ë—Ç –ø–æ –∞—É–¥–∏—Ç—É FOHOW Interactive Board

## –î–∞—Ç–∞: 05.02.2026

---

## –°–≤–æ–¥–∫–∞

- üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º: 8
- üü° –°—Ä–µ–¥–Ω–∏—Ö –ø—Ä–æ–±–ª–µ–º: 14
- üü¢ –ú–µ–ª–∫–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π: 12
- üìÑ –ù–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: 7

---

## 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –†–∞–∑–º–µ—Ä `api/server.js` | 282 —Å—Ç—Ä–æ–∫–∏ |
| –≠–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –≤ `server.js` | 1 (`/api/health`) |
| Route-—Ñ–∞–π–ª–æ–≤ –≤ `api/routes/` | 31 —Ñ–∞–π–ª |
| –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä route-—Ñ–∞–π–ª–æ–≤ | 10 318 —Å—Ç—Ä–æ–∫ |
| Composables | 30 —Ñ–∞–π–ª–æ–≤ |
| Stores | 22 —Ñ–∞–π–ª–∞ (–≤–∫–ª—é—á–∞—è —Ç–µ—Å—Ç –∏ example) |
| Vue-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ | ~65 —Ñ–∞–π–ª–æ–≤ |
| Middleware | 5 —Ñ–∞–π–ª–æ–≤ |

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `api/server.js`

Server.js —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω: –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ route-–º–æ–¥—É–ª–∏. –í —Å–∞–º–æ–º `server.js` –æ—Å—Ç–∞–ª—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç:

| –°—Ç—Ä–æ–∫–∞ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|----------|------------|
| 155 | `GET /api/health` | Health-check |

–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ `registerXxxRoutes()` —Ñ—É–Ω–∫—Ü–∏–∏. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –º–µ–∂–¥—É `server.js` –∏ route-—Ñ–∞–π–ª–∞–º–∏ **–Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ**.

### –ö—Ä—É–ø–Ω—ã–µ route-—Ñ–∞–π–ª—ã (–∫–∞–Ω–¥–∏–¥–∞—Ç—ã –Ω–∞ —Ä–∞–∑–±–∏–µ–Ω–∏–µ)

| –§–∞–π–ª | –°—Ç—Ä–æ–∫–∏ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------|--------|-------------|
| `api/routes/admin/images.js` | 1 620 | üü° –ë–æ–ª—å—à–æ–π —Ñ–∞–π–ª ‚Äî –º–æ–¥–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π |
| `api/routes/images/myLibrary.js` | 1 199 | üü° –ë–æ–ª—å—à–æ–π —Ñ–∞–π–ª ‚Äî –ª–∏—á–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ |
| `api/routes/profile.js` | 810 | üü° –ú–Ω–æ–≥–æ —Ä–∞–∑–Ω–æ—Ä–æ–¥–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –ø—Ä–æ—Ñ–∏–ª—è |
| `api/routes/auth.js` | 795 | –ü—Ä–∏–µ–º–ª–µ–º–æ ‚Äî –≤—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è |
| `api/routes/boards.js` | 625 | –ü—Ä–∏–µ–º–ª–µ–º–æ |

### –ö—Ä—É–ø–Ω—ã–µ composables (>300 —Å—Ç—Ä–æ–∫)

| –§–∞–π–ª | –°—Ç—Ä–æ–∫–∏ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|------|--------|-------------|
| `useProjectActions.js` | 2 043 | üî¥ **–ö—Ä–∏—Ç–∏—á–Ω–æ** ‚Äî –æ–≥—Ä–æ–º–Ω—ã–π —Ñ–∞–π–ª, —Ç—Ä–µ–±—É–µ—Ç —Ä–∞–∑–±–∏–µ–Ω–∏—è |
| `useUserCardConnections.js` | 822 | üü° –†–∞–∑–±–∏—Ç—å –Ω–∞ sub-composables |
| `useCanvasImageRenderer.js` | 821 | üü° –†–∞–∑–±–∏—Ç—å |
| `usePanZoom.js` | 654 | üü° –î–æ–ø—É—Å—Ç–∏–º–æ, –Ω–æ –Ω–∞ –≥—Ä–∞–Ω–∏ |
| `useCanvasDrag.js` | 642 | üü° –î–æ–ø—É—Å—Ç–∏–º–æ |
| `useActivePv.js` | 521 | üü° –î–æ–ø—É—Å—Ç–∏–º–æ |
| `useUserVerification.js` | 492 | –î–æ–ø—É—Å—Ç–∏–º–æ |
| `useUserPersonalInfo.js` | 456 | –î–æ–ø—É—Å—Ç–∏–º–æ |

### –ö—Ä—É–ø–Ω—ã–µ Vue-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (>500 —Å—Ç—Ä–æ–∫)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç—Ä–æ–∫–∏ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|-----------|--------|-------------|
| `UserProfile.vue` | 4 223 | üî¥ **–ö—Ä–∏—Ç–∏—á–Ω–æ** ‚Äî —Ä–∞–∑–±–∏—Ç—å –Ω–∞ sub-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã |
| `CanvasBoard.vue` | 3 552 | üî¥ **–ö—Ä–∏—Ç–∏—á–Ω–æ** ‚Äî —Ä–∞–∑–±–∏—Ç—å |
| `PencilOverlay.vue` | 2 239 | üü° –†–∞–∑–±–∏—Ç—å |
| `Card.vue` | 1 938 | üü° –†–∞–∑–±–∏—Ç—å |
| `BoardsList.vue` | 1 934 | üü° –†–∞–∑–±–∏—Ç—å |
| `AdminVerification.vue` | 1 410 | üü° –†–∞–∑–±–∏—Ç—å |
| `AdminSharedLibrary.vue` | 1 330 | üü° –†–∞–∑–±–∏—Ç—å |
| `MyLibraryTab.vue` | 1 250 | üü° –î–æ–ø—É—Å—Ç–∏–º–æ |
| `MobileHeader.vue` | 1 105 | üü° –†–∞–∑–±–∏—Ç—å |
| `BoardsModal.vue` | 1 103 | üü° –î–æ–ø—É—Å—Ç–∏–º–æ |

### –ü—Ä–æ–±–ª–µ–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

| # | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ | –§–∞–π–ª | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|---|------------|----------|------|-------------|
| A1 | üî¥ | `useProjectActions.js` ‚Äî 2043 —Å—Ç—Ä–æ–∫–∏, –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π composable | `src/composables/useProjectActions.js` | –†–∞–∑–±–∏—Ç—å –Ω–∞ 4-5 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö composables |
| A2 | üî¥ | `UserProfile.vue` ‚Äî 4223 —Å—Ç—Ä–æ–∫–∏, –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å | `src/components/UserProfile.vue` | –†–∞–∑–±–∏—Ç—å –Ω–∞ TabProfile, TabSecurity, TabTelegram –∏ —Ç.–¥. |
| A3 | üî¥ | `CanvasBoard.vue` ‚Äî 3552 —Å—Ç—Ä–æ–∫–∏ | `src/components/Canvas/CanvasBoard.vue` | –í—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –≤ composables |
| A4 | üü° | –ù–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π API —Ä–æ—É—Ç–æ–≤: —á–∞—Å—Ç—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `(app)`, —á–∞—Å—Ç—å `(app, pool, authenticateToken)` | `api/routes/partners.js`, `api/routes/favorites.js` | –ü—Ä–∏–≤–µ—Å—Ç–∏ –∫ –µ–¥–∏–Ω–æ–º—É —Å—Ç–∏–ª—é `(app)` |
| A5 | üü° | –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ `getDaysWord` –≤ 3 —Ñ–∞–π–ª–∞—Ö | `api/cron/tasks.js:728`, `api/templates/telegramTemplates.js:11`, `api/templates/emailTemplates.js:1318` | –í—ã–Ω–µ—Å—Ç–∏ –≤ `api/utils/formatUtils.js` |
| A6 | üü° | `api/routes/admin/images.js` ‚Äî 1620 —Å—Ç—Ä–æ–∫ | `api/routes/admin/images.js` | –†–∞–∑–±–∏—Ç—å –Ω–∞ upload, moderation, management |
| A7 | üü¢ | –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ –ª–æ–≥–∏ –≤ `server.js` (—Å—Ç—Ä–æ–∫–∏ 108-136) | `api/server.js:108-136` | –£–¥–∞–ª–∏—Ç—å —Ö—É–∫–∏ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è `/api/login` |
| A8 | üü¢ | –î–≤–æ–π–Ω–æ–π –ª–æ–≥ `WebSocket server initialized` | `api/server.js:261,265` | –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â—É—é —Å—Ç—Ä–æ–∫—É 265 |

---

## 2. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 2.1 –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

| # | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ | –§–∞–π–ª:–°—Ç—Ä–æ–∫–∞ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|---|------------|----------|-------------|-------------|
| S1 | üî¥ | **–•–∞—Ä–¥–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JWT secret fallback** –≤ WebSocket: `process.env.JWT_SECRET \|\| 'your-secret-key-change-in-production'` | `api/socket.js:4` | –£–±—Ä–∞—Ç—å fallback. –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ JWT_SECRET ‚Äî –±—Ä–æ—Å–∞—Ç—å –æ—à–∏–±–∫—É |
| S2 | üî¥ | **SQL-–∏–Ω—ä–µ–∫—Ü–∏—è** —á–µ—Ä–µ–∑ `limitFeatureName` ‚Äî —Å—Ç—Ä–æ–∫–æ–≤–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –≤ SQL-–∑–∞–ø—Ä–æ—Å–µ: `` `SELECT sp.features->'${limitFeatureName}' as limit` `` | `api/middleware/checkUsageLimit.js:32` | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∏–ª–∏ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å `limitFeatureName` —á–µ—Ä–µ–∑ whitelist |
| S3 | üî¥ | **SQL-–∏–Ω—ä–µ–∫—Ü–∏—è** —á–µ—Ä–µ–∑ `whereClause` ‚Äî —Å—Ç—Ä–æ–∫–æ–≤–∞—è –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è –¥–ª—è WHERE-—É—Å–ª–æ–≤–∏–π | `api/routes/admin/stats.js:91`, `api/routes/admin/users.js:36` | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å $1, $2 |
| S4 | üü° | **CORS —Å–ª–∏—à–∫–æ–º –æ—Ç–∫—Ä—ã—Ç—ã–π** ‚Äî `origin: "*"` –¥–ª—è WebSocket | `api/socket.js:9` | –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ (interactive.marketingfohow.ru, 1508.marketingfohow.ru) |
| S5 | üü° | **CORS —Å–ª–∏—à–∫–æ–º –æ—Ç–∫—Ä—ã—Ç—ã–π** ‚Äî `origin: true` –¥–ª—è Fastify | `api/server.js:75` | –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ |
| S6 | üü° | **–ù–µ—Ç rate limiting** –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö `/api/login`, `/api/register`, `/api/verification-code`, `/api/forgot-password` | `api/routes/auth.js` | –î–æ–±–∞–≤–∏—Ç—å @fastify/rate-limit |
| S7 | üü° | **WebSocket JWT field mismatch**: `auth.js` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `decoded.userId`, –∞ `socket.js` ‚Äî `decoded.id` | `api/middleware/auth.js:21`, `api/socket.js:24` | –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–µ JWT-—Ç–æ–∫–µ–Ω–∞ |
| S8 | üü° | **–ü—É–±–ª–∏—á–Ω—ã–π webhook** `/api/webhook/tribute` –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ ‚Äî –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–π | `api/routes/tribute.js:26` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–¥–ø–∏—Å–∏ webhook |

### 2.2 –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–ø—É–±–ª–∏—á–Ω—ã–µ)

| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –§–∞–π–ª | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
|----------|------|-------------|
| `GET /api/health` | `server.js:155` | Health check ‚Äî –û–ö |
| `GET /api/test-auth` | `auth.js:111` | üü° –£–¥–∞–ª–∏—Ç—å –≤ production |
| `POST /api/verification-code` | `auth.js:117` | üü° –ù—É–∂–µ–Ω rate limiting |
| `POST /api/register` | `auth.js:128` | üü° –ù—É–∂–µ–Ω rate limiting |
| `POST /api/login` | `auth.js:234` | üü° –ù—É–∂–µ–Ω rate limiting |
| `POST /api/resend-verification-code` | `auth.js:435` | üü° –ù—É–∂–µ–Ω rate limiting |
| `POST /api/verify-email` | `auth.js:492` | üü° –ù—É–∂–µ–Ω rate limiting |
| `POST /api/forgot-password` | `auth.js:688` | üü° –ù—É–∂–µ–Ω rate limiting |
| `POST /api/reset-password` | `auth.js:745` | üü° –ù—É–∂–µ–Ω rate limiting |
| `GET /api/plans` | `plans.js:120` | –¢–∞—Ä–∏—Ñ—ã ‚Äî –û–ö |
| `GET /api/avatar/:userId` | `profile.js:615` | –ü—É–±–ª–∏—á–Ω—ã–π –∞–≤–∞—Ç–∞—Ä ‚Äî –û–ö |
| `GET /api/boards/:boardId/preview` | `boards.js:551` | –ü—Ä–µ–≤—å—é ‚Äî –û–ö |
| `POST /api/webhook/tribute` | `tribute.js:26` | Webhook ‚Äî –Ω—É–∂–Ω–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏ |
| `GET /api/webhook/tribute/health` | `tribute.js:95` | Health check ‚Äî –û–ö |

### 2.3 JWT –∏ —Å–µ—Å—Å–∏–∏

- **–ê–ª–≥–æ—Ä–∏—Ç–º JWT**: –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é HS256 (jsonwebtoken default)
- **JWT_SECRET**: –ë–µ—Ä—ë—Ç—Å—è –∏–∑ `process.env.JWT_SECRET`, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ (`server.js:64-68`)
- **–°–µ—Å—Å–∏–∏**: –•—Ä–∞–Ω—è—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `active_sessions` —Å `token_signature`
- **–û—Ç–∑—ã–≤ —Ç–æ–∫–µ–Ω–æ–≤**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ `active_sessions`
- **Last seen**: –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ (–Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π fire-and-forget –≤—ã–∑–æ–≤)
- **–ê–≤—Ç–æ–≤—ã—Ö–æ–¥ –ø–æ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏**: 1 —á–∞—Å (cron –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)

### 2.4 –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–æ–¥—ã (Redis/Email)

- TTL –∫–æ–¥–æ–≤: –•—Ä–∞–Ω—è—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `email_verification_codes` —Å –ø–æ–ª–µ–º `expires_at`
- –û—á–∏—Å—Ç–∫–∞: Cron-–∑–∞–¥–∞—á–∞ –∫–∞–∂–¥—ã–π —á–∞—Å (`cleanupExpiredVerificationCodes`)
- **üü° –ù–µ—Ç rate limiting** –Ω–∞ `/api/verification-code` ‚Äî –≤–æ–∑–º–æ–∂–µ–Ω –±—Äute-force
- –ö–æ–¥—ã –Ω–µ —É—Ç–µ–∫–∞—é—Ç –≤ –æ—Ç–≤–µ—Ç–∞—Ö API

### 2.5 –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤

- **–õ–∏–º–∏—Ç —Ä–∞–∑–º–µ—Ä–∞**: 5MB (`server.js:78`) ‚Äî –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ @fastify/multipart
- **MIME-—Ç–∏–ø**: üü° –ü—Ä–æ–≤–µ—Ä–∫–∞ MIME-—Ç–∏–ø–∞ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –≤ route-—Ñ–∞–π–ª–∞—Ö –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **Path traversal**: –ò–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (UUID/hash), –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏–º–µ–Ω–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞–∫ –ø—É—Ç–∏ ‚Äî –û–ö
- **WebP –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è**: –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ sharp –≤ `api/routes/images/myLibrary.js`

### 2.6 `.env.example` ‚Äî –ø–æ–∫—Ä—ã—Ç–∏–µ

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –í .env.example | –í –∫–æ–¥–µ |
|-----------|---------------|--------|
| DB_USER/HOST/NAME/PASSWORD/PORT | ‚úÖ | ‚úÖ |
| JWT_SECRET | ‚úÖ | ‚úÖ |
| PORT | ‚úÖ | ‚úÖ |
| NODE_ENV | ‚úÖ | ‚úÖ |
| EMAIL_HOST/PORT/SECURE/USER/PASSWORD/FROM | ‚úÖ | ‚úÖ |
| FRONTEND_URL | ‚úÖ | ‚úÖ |
| TELEGRAM_BOT_TOKEN | ‚úÖ | ‚úÖ |
| TRIBUTE_API_KEY | ‚úÖ | ‚úÖ |
| TRIBUTE_WEBHOOK_SECRET | ‚úÖ | ‚úÖ |
| YANDEX_DISK_TOKEN | ‚ùå | ‚úÖ |
| YANDEX_DISK_BASE_DIR | ‚ùå | ‚úÖ |
| REDIS_URL | ‚ùå | –í–æ–∑–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |

**üü° –ü—Ä–æ–±–ª–µ–º–∞**: `YANDEX_DISK_TOKEN` –∏ `YANDEX_DISK_BASE_DIR` **–æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç** –≤ `.env.example`, —Ö–æ—Ç—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã (–ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ ‚Äî `process.exit(1)` –≤ `yandexDiskService.js:11-25`).

---

## 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### 3.1 –ú–∏–≥—Ä–∞—Ü–∏–∏

–ù–∞–π–¥–µ–Ω–æ 5 SQL-—Ñ–∞–π–ª–æ–≤ –º–∏–≥—Ä–∞—Ü–∏–π:

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `025_add_ui_preferences_to_users.sql` | UI-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| `026_add_image_rename_audit.sql` | –ê—É–¥–∏—Ç –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π |
| `027_fix_image_rename_types.sql` | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ |
| `20251224_add_grace_period.sql` | Grace-–ø–µ—Ä–∏–æ–¥ –¥–ª—è –ø–æ–¥–ø–∏—Å–æ–∫ |
| `20260120_update_subscription_plans_pricing.sql` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω |

**üü° –ü—Ä–æ–±–ª–µ–º–∞**: –ù—É–º–µ—Ä–∞—Ü–∏—è **–Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞** ‚Äî —á–∞—Å—Ç—å —Ñ–∞–π–ª–æ–≤ —Å –ø–æ—Ä—è–¥–∫–æ–≤—ã–º –Ω–æ–º–µ—Ä–æ–º (025, 026, 027), —á–∞—Å—Ç—å —Å –¥–∞—Ç–æ–π (20251224, 20260120). –ù–µ—Ç –µ–¥–∏–Ω–æ–≥–æ runner'–∞ —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º —É–∂–µ –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π.

### 3.2 SQL-–∑–∞–ø—Ä–æ—Å—ã

| # | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ | –§–∞–π–ª:–°—Ç—Ä–æ–∫–∞ |
|---|------------|----------|-------------|
| D1 | üî¥ | **SQL-–∏–Ω—ä–µ–∫—Ü–∏—è** —á–µ—Ä–µ–∑ —Å—Ç—Ä–æ–∫–æ–≤—É—é –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—é `limitFeatureName` | `api/middleware/checkUsageLimit.js:32` |
| D2 | üî¥ | **SQL-–∏–Ω—ä–µ–∫—Ü–∏—è** —á–µ—Ä–µ–∑ `whereClause` –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—é | `api/routes/admin/stats.js:91`, `api/routes/admin/users.js:36` |
| D3 | üü° | `SELECT *` –≤–º–µ—Å—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–æ–ª–µ–π (9 —Å–ª—É—á–∞–µ–≤) | `profile.js:141`, `boards.js:117-118,374-375`, `auth.js:254,502,521`, `promo.js:48`, `users.js:14` |
| D4 | üü° | –ù–µ—Ç `LIMIT` –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –≤ `boards.js` GET `/api/boards` | `api/routes/boards.js:59` |
| D5 | üü¢ | `SELECT * FROM users` –≤ auth-–∑–∞–ø—Ä–æ—Å–∞—Ö —Ç—è–Ω–µ—Ç –ø–∞—Ä–æ–ª—å (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, –Ω–æ –ª–∏—à–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ) | `api/routes/auth.js:254` |

### 3.3 –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ **–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ** –≤:
- `api/cron/tasks.js` ‚Äî –≤—Å–µ –∫—Ä–æ–Ω-–∑–∞–¥–∞—á–∏ —Å `BEGIN/COMMIT/ROLLBACK`
- `api/bot/telegramBot.js` ‚Äî –ø—Ä–∏–≤—è–∑–∫–∞ Telegram-–∞–∫–∫–∞—É–Ω—Ç–∞
- `api/routes/boards.js` ‚Äî –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–æ—Å–∫–∞–º–∏

### 3.4 –ò–Ω–¥–µ–∫—Å—ã

**üü° –ü—Ä–æ–±–ª–µ–º–∞**: –í –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏—è—Ö **–Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ** CREATE INDEX. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –Ω–∞:
- `users.email` (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
- `users.personal_id`
- `users.telegram_chat_id`
- `boards.owner_id`
- `active_sessions.token_signature`
- `active_sessions.user_id`
- `active_sessions.last_seen`
- `notes.board_id`
- `stickers.board_id`
- `subscription_history.user_id`
- `telegram_link_codes.code`

**SQL-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ (–≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Ä—É—á–Ω—É—é):**

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã
SELECT tablename, indexname, indexdef
FROM pg_indexes
WHERE schemaname = 'public'
ORDER BY tablename, indexname;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã –±–µ–∑ –∏–Ω–¥–µ–∫—Å–æ–≤ –Ω–∞ –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–∞—Ö
SELECT tc.table_name, kcu.column_name
FROM information_schema.table_constraints tc
JOIN information_schema.key_column_usage kcu
  ON tc.constraint_name = kcu.constraint_name
WHERE tc.constraint_type = 'FOREIGN KEY'
  AND tc.table_schema = 'public';
```

### 3.5 Connection pooling

`api/db.js` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `pg.Pool` —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. **üü¢** –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å:
- `max` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10, –º–æ–∂–µ—Ç –±—ã—Ç—å –º–∞–ª–æ)
- `connectionTimeoutMillis`
- `idleTimeoutMillis`

---

## 4. –ö—Ä–æ–Ω-–∑–∞–¥–∞—á–∏

### 4.1 –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫—Ä–æ–Ω-–∑–∞–¥–∞—á

| # | –ó–∞–¥–∞—á–∞ | –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ | –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è | Error handling |
|---|--------|-----------|-----------|----------------|
| 1 | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–æ–∫ | `0 9 * * *` (09:00 –ú–°–ö) | –ù–µ—Ç | ‚úÖ try/catch |
| 2 | –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ç—ë–∫—à–∏—Ö –ø–æ–¥–ø–∏—Å–æ–∫ | `0 9 * * *` (09:00 –ú–°–ö) | ‚úÖ | ‚úÖ |
| 2.1 | –û–∫–æ–Ω—á–∞–Ω–∏–µ grace-–ø–µ—Ä–∏–æ–¥–∞ | `30 1 * * *` (01:30 –ú–°–ö) | ‚úÖ | ‚úÖ |
| 3 | –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Å–µ—Å—Å–∏–π | `0 * * * *` (–∫–∞–∂–¥—ã–π —á–∞—Å) | –ù–µ—Ç | ‚úÖ |
| 3.1 | –ê–≤—Ç–æ–≤—ã—Ö–æ–¥ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö (1 —á–∞—Å) | `*/5 * * * *` (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω) | –ù–µ—Ç | ‚úÖ |
| 4 | –ó–∞–∫—Ä—ã—Ç–∏–µ –¥–µ–º–æ-–ø–µ—Ä–∏–æ–¥–æ–≤ | `0 2 * * *` (02:00 –ú–°–ö) | ‚úÖ | ‚úÖ |
| 5 | –î–µ–º–æ ‚Üí –ì–æ—Å—Ç–µ–≤–æ–π | `30 2 * * *` (02:30 –ú–°–ö) | ‚úÖ | ‚úÖ |
| 6 | –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ—Å–æ–∫ (14 –¥–Ω–µ–π) | `0 3 * * *` (03:00 –ú–°–ö) | ‚úÖ | ‚úÖ |
| 7 | –û—á–∏—Å—Ç–∫–∞ email-–∫–æ–¥–æ–≤ | `0 * * * *` (–∫–∞–∂–¥—ã–π —á–∞—Å) | –ù–µ—Ç | ‚úÖ |
| 8 | –û–±—Ä–∞–±–æ—Ç–∫–∞ Soft/Hard Lock | `30 3 * * *` (03:30 –ú–°–ö) | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç `boardLockService` | ‚úÖ |

### 4.2 –ü—Ä–æ–±–ª–µ–º—ã –∫—Ä–æ–Ω-–∑–∞–¥–∞—á

| # | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ | –§–∞–π–ª:–°—Ç—Ä–æ–∫–∞ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|---|------------|----------|-------------|-------------|
| C1 | üî¥ | **–ë–∞–≥**: –ó–∞–¥–∞—á–∏ 1 –∏ 2 –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ –æ–¥–Ω–æ –≤—Ä–µ–º—è (`0 9 * * *`), —Ö–æ—Ç—è –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∑–∞–¥–∞—á–∞ 2 –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ 01:00 | `api/cron/tasks.js:758,766` | –ó–∞–¥–∞—á—É 2 –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –Ω–∞ `0 1 * * *` |
| C2 | üî¥ | **–ë–∞–≥**: `switchDemoToGuest` (–∑–∞–¥–∞—á–∞ 5) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `guestPlanId` –≤–º–µ—Å—Ç–æ `guestPlan.id` –≤ —Å—Ç—Ä–æ–∫–µ 557 | `api/cron/tasks.js:557` | –ó–∞–º–µ–Ω–∏—Ç—å `guestPlanId` –Ω–∞ `guestPlan.id` |
| C3 | üü° | **–ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞** ‚Äî –µ—Å–ª–∏ –∑–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–æ–ª—å—à–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞, –æ–Ω–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ | –í—Å–µ –∑–∞–¥–∞—á–∏ | –î–æ–±–∞–≤–∏—Ç—å advisory lock –∏–ª–∏ —Ñ–ª–∞–≥ `isRunning` |
| C4 | üü° | **–ó–∞–¥–∞—á–∞ 6 (—É–¥–∞–ª–µ–Ω–∏–µ –¥–æ—Å–æ–∫)**: –ø—Ä–∏ `DELETE FROM boards` –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (cards, stickers, notes, connections) ‚Äî –∑–∞–≤–∏—Å–∏—Ç –æ—Ç CASCADE –≤ —Å—Ö–µ–º–µ | `api/cron/tasks.js:637-642` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ ON DELETE CASCADE |
| C5 | üü¢ | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `system_logs` ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª—É—á–∞–π –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ç–∞–±–ª–∏—Ü—ã (42P01) | `api/cron/tasks.js:46-47` | –û–ö |

---

## 5. –®–∞–±–ª–æ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### 5.1 Telegram-—à–∞–±–ª–æ–Ω—ã

| –®–∞–±–ª–æ–Ω | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è | URL |
|--------|-------------|-----|
| `getSubscriptionExpiringMessage` | ‚úÖ cron/tasks.js | FRONTEND_URL (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π) ‚úÖ |
| `getSubscriptionExpiredMessage` | ‚úÖ cron/tasks.js | FRONTEND_URL (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π) ‚úÖ |
| `getWelcomeMessage` | ‚ùì –ù–µ –Ω–∞–π–¥–µ–Ω import –≤ route-—Ñ–∞–π–ª–∞—Ö | üî¥ `https://fohow.ru/dashboard` ‚Äî **–Ω–µ–≤–µ—Ä–Ω—ã–π URL** |
| `getSubscriptionActivatedMessage` | ‚úÖ tribute routes | `interactive.marketingfohow.ru/boards` ‚úÖ |
| `getPromoCodeAppliedMessage` | ‚úÖ promo routes | `interactive.marketingfohow.ru/boards` ‚úÖ |
| `getSubscriptionRenewedMessage` | ‚úÖ tribute routes | `interactive.marketingfohow.ru/boards` ‚úÖ |
| `getSubscriptionCancelledMessage` | ‚úÖ | `interactive.marketingfohow.ru` ‚úÖ |
| `getTelegramDisconnectedMessage` | ‚úÖ telegram.js | –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π profileUrl ‚úÖ |
| `getVerificationApprovedMessage` | ‚úÖ verification routes | `interactive.marketingfohow.ru/` ‚úÖ |
| `getVerificationRevokedMessage` | ‚úÖ verification routes | `interactive.marketingfohow.ru/` ‚úÖ |
| `getVerificationAutoRejectedMessage` | ‚úÖ verification routes | `interactive.marketingfohow.ru/` ‚úÖ |

### 5.2 –ü—Ä–æ–±–ª–µ–º—ã —Å URL –≤ —à–∞–±–ª–æ–Ω–∞—Ö

| # | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ | –§–∞–π–ª:–°—Ç—Ä–æ–∫–∞ |
|---|------------|----------|-------------|
| T1 | üî¥ | `getWelcomeMessage` default URL `https://fohow.ru/dashboard` ‚Äî **–¥–æ–º–µ–Ω –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç** | `api/templates/telegramTemplates.js:119` |
| T2 | üî¥ | URL `https://fohow.ru/tutorials` ‚Äî **—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç** | `api/templates/telegramTemplates.js:162` |
| T3 | üü° | URL `https://t.me/fohow_support` ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å (–≤ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `@FOHOWadmin`) | `api/templates/telegramTemplates.js:166` |
| T4 | üü¢ | `getWelcomeMessage` –≤–µ—Ä–æ—è—Ç–Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ (–Ω–µ—Ç –∏–º–ø–æ—Ä—Ç–æ–≤ –∫—Ä–æ–º–µ cron) | | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |

### 5.3 Email-—à–∞–±–ª–æ–Ω—ã

–ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä email-—à–∞–±–ª–æ–Ω–æ–≤:
- ‚úÖ `getSubscriptionExpiringTemplate`
- ‚úÖ `getSubscriptionExpiredTemplate`
- ‚úÖ `getWelcomeTemplate`
- ‚úÖ `getVerificationApprovedTemplate`
- ‚úÖ `getVerificationRevokedTemplate`
- ‚úÖ `getVerificationAutoRejectedTemplate`
- ‚úÖ `getVerificationRejectedTemplate`
- ‚úÖ `getVerificationCodeTemplate`
- ‚úÖ `getPasswordResetTemplate`
- ‚úÖ `getSubscriptionEventTemplate` (new, renewed, cancelled, promo)
- ‚úÖ `getPasswordChangedTemplate`

HTML-—à–∞–±–ª–æ–Ω—ã –∏–º–µ—é—Ç:
- ‚úÖ `viewport` meta-—Ç–µ–≥
- ‚úÖ Inline-—Å—Ç–∏–ª–∏ (–¥–ª—è email-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
- ‚úÖ `@media (prefers-color-scheme: dark)` –¥–ª—è —Ç—ë–º–Ω–æ–π —Ç–µ–º—ã
- ‚úÖ Responsive max-width 600px

---

## 6. Telegram-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### 6.1 Telegram-–±–æ—Ç

- **–†–µ–∂–∏–º**: Long polling (`{ polling: true }`)
- **–ö–æ–º–∞–Ω–¥—ã**: –¢–æ–ª—å–∫–æ `/start` (—Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –∫–æ–¥–æ–º)
- **Error handling**: ‚úÖ `polling_error` –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
- **Graceful shutdown**: üü° –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω ‚Äî –±–æ—Ç –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ SIGTERM

### 6.2 Telegram-—Å–µ—Ä–≤–∏—Å

- **Retry-–ª–æ–≥–∏–∫–∞**: üü° **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç** ‚Äî –ø—Ä–∏ –æ—à–∏–±–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ —Ç–µ—Ä—è–µ—Ç—Å—è
- **Rate limiting**: üü° **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç** ‚Äî –ø—Ä–∏ –º–∞—Å—Å–æ–≤–æ–π —Ä–∞—Å—Å—ã–ª–∫–µ (cron) –≤–æ–∑–º–æ–∂–Ω—ã 429 –æ—à–∏–±–∫–∏ –æ—Ç Telegram API
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ TELEGRAM_BOT_TOKEN**: ‚úÖ –ë—Ä–æ—Å–∞–µ—Ç –æ—à–∏–±–∫—É –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏

### 6.3 –ü—Ä–∏–≤—è–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞

- **Flow**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `/start CODE` ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ ‚Üí –ü—Ä–∏–≤—è–∑–∫–∞
- **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è**: ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `BEGIN/COMMIT/ROLLBACK`
- **–û—á–∏—Å—Ç–∫–∞ –∫–æ–¥–æ–≤**: üü° –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∫–æ–¥—ã –≤ `telegram_link_codes` –Ω–µ –æ—á–∏—â–∞—é—Ç—Å—è cron-–∑–∞–¥–∞—á–µ–π (—Ç–æ–ª—å–∫–æ email-–∫–æ–¥—ã –æ—á–∏—â–∞—é—Ç—Å—è)
- **Race condition**: ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–æ–π `existingUser` –ø–µ—Ä–µ–¥ –ø—Ä–∏–≤—è–∑–∫–æ–π

---

## 7. –ü–æ–¥–ø–∏—Å–∫–∏ –∏ —Ç–∞—Ä–∏—Ñ—ã

### 7.1 –¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã

| –ü–ª–∞–Ω | Code | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|------|----------|
| Guest | `guest` | –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π, 3 –¥–æ—Å–∫–∏ |
| Demo | `demo` | 3 –¥–Ω—è, 9 –¥–æ—Å–æ–∫ |
| Individual | `individual` | –ü–ª–∞—Ç–Ω—ã–π, 9 –¥–æ—Å–æ–∫ |
| Premium | `premium` | –ü–ª–∞—Ç–Ω—ã–π, –±–µ–∑–ª–∏–º–∏—Ç |

### 7.2 Flow –ø–æ–¥–ø–∏—Å–æ–∫

```
–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Üí Demo (3 –¥–Ω—è) ‚Üí Guest
                                ‚Üì
                      –û–ø–ª–∞—Ç–∞ ‚Üí Individual/Premium
                                ‚Üì (–∏—Å—Ç–µ—á–µ–Ω–∏–µ)
                      Grace-–ø–µ—Ä–∏–æ–¥ (7 –¥–Ω–µ–π) ‚Üí –ê—Ä—Ö–∏–≤–∞—Ü–∏—è –¥–æ—Å–æ–∫ ‚Üí Guest
```

### 7.3 –ü—Ä–æ–±–ª–µ–º—ã –ø–æ–¥–ø–∏—Å–æ–∫

| # | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ | –§–∞–π–ª |
|---|------------|----------|------|
| P1 | üü° | `auto_renew` ‚Äî –ø–æ–ª–µ –≤ –ë–î, –Ω–æ **–ª–æ–≥–∏–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞** –≤ –∫–æ–¥–µ | ‚Äî |
| P2 | üü° | Feature gating –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±–æ–π–¥—ë–Ω –ø—Ä—è–º—ã–º–∏ API-–≤—ã–∑–æ–≤–∞–º–∏ (–µ—Å–ª–∏ backend –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç) | ‚Äî |
| P3 | üü¢ | `subscription_history` –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö | ‚úÖ |

### 7.4 Backend vs Frontend –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

| –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ | Backend | Frontend |
|------------|---------|----------|
| max_boards | ‚úÖ `checkUsageLimit` | ‚úÖ `FeatureGate.vue` |
| max_stickers | ‚úÖ `checkUsageLimit` | ‚úÖ |
| max_notes | ‚úÖ `checkUsageLimit` | ‚úÖ |
| max_comments | ‚úÖ `checkUsageLimit` | ‚úÖ |
| max_licenses | ‚úÖ `checkUsageLimit` | ‚úÖ |
| can_duplicate_boards | ‚úÖ `checkFeature` | ‚úÖ |
| can_export_html | ‚ùì –ù–µ –Ω–∞–π–¥–µ–Ω–æ | ‚úÖ Frontend-only |
| can_invite_to_draw | ‚ùì –ù–µ –Ω–∞–π–¥–µ–Ω–æ | ‚úÖ Frontend-only |

**üü°** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–∏—á–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (`can_export_html`, `can_invite_to_draw`). –í–æ–∑–º–æ–∂–µ–Ω –æ–±—Ö–æ–¥ —á–µ—Ä–µ–∑ –ø—Ä—è–º—ã–µ API-–≤—ã–∑–æ–≤—ã.

---

## 8. –§—Ä–æ–Ω—Ç–µ–Ω–¥

### 8.1 –†–æ—É—Ç–∏–Ω–≥

| –ú–∞—Ä—à—Ä—É—Ç | Auth | Admin | Lazy Load | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|---------|------|-------|-----------|-------------|
| `/` | –ù–µ—Ç | –ù–µ—Ç | –ù–µ—Ç | HomeView |
| `/boards` | ‚úÖ | –ù–µ—Ç | –ù–µ—Ç | BoardsList |
| `/board/:id` | ‚úÖ | –ù–µ—Ç | –ù–µ—Ç | üü° –ò—Å–ø–æ–ª—å–∑—É–µ—Ç HomeView (–ø–æ–º–µ—á–µ–Ω–æ "–í—Ä–µ–º–µ–Ω–Ω–æ") |
| `/pricing` | –ù–µ—Ç | –ù–µ—Ç | –ù–µ—Ç | PricingPage |
| `/verify-email` | –ù–µ—Ç | –ù–µ—Ç | –ù–µ—Ç | EmailVerification |
| `/admin` | ‚úÖ | ‚úÖ | –ù–µ—Ç | AdminPanel |

**–ü—Ä–æ–±–ª–µ–º—ã —Ä–æ—É—Ç–∏–Ω–≥–∞:**

| # | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ | –§–∞–π–ª:–°—Ç—Ä–æ–∫–∞ |
|---|------------|----------|-------------|
| R1 | üü° | **–ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ 404** ‚Äî –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É | `src/router/index.js` |
| R2 | üü° | **–ù–µ—Ç lazy loading** ‚Äî –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å—Ä–∞–∑—É | `src/router/index.js:2-6` |
| R3 | üü° | `/board/:id` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç HomeView —Å –ø–æ–º–µ—Ç–∫–æ–π "–í—Ä–µ–º–µ–Ω–Ω–æ" (—Å—Ç—Ä–æ–∫–∞ 25) | `src/router/index.js:25` |
| R4 | üü¢ | –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ `console.log` –≤ navigation guard | `src/router/index.js:55,71,76,81` |

### 8.2 State Management (Pinia)

| Store | –°—Ç—Ä–æ–∫–∏ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-------|--------|-----------|
| `admin.js` | 1 210 | üü° –û—á–µ–Ω—å –±–æ–ª—å—à–æ–π ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è |
| `cards.js` | 792 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ |
| `images.js` | 684 | –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π |
| `connections.js` | 589 | –°–≤—è–∑–∏ –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ |
| `boardFolders.js` | 499 | –ü–∞–ø–∫–∏ –¥–æ—Å–æ–∫ |
| `stickers.js` | 494 | –°—Ç–∏–∫–µ—Ä—ã |
| `subscription.js` | 448 | –ü–æ–¥–ø–∏—Å–∫–∏ |
| `notes.js` | 414 | –ó–∞–º–µ—Ç–∫–∏ |
| `auth.js` | 407 | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è |
| `drawing.js` | 394 | –†–∏—Å–æ–≤–∞–Ω–∏–µ |

**üü° –ü—Ä–æ–±–ª–µ–º–∞**: –§–∞–π–ª `src/stores/drawing.usage.example.js` (227 —Å—Ç—Ä–æ–∫) ‚Äî –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ production.

### 8.3 –ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏:
- `src/locales/ru.js` ‚Äî –†—É—Å—Å–∫–∏–π
- `src/locales/en.js` ‚Äî –ê–Ω–≥–ª–∏–π—Å–∫–∏–π
- `src/locales/zh.js` ‚Äî –ö–∏—Ç–∞–π—Å–∫–∏–π

**üü°** –ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ –ø–æ–ª–Ω–æ—Ç–∞ –∫–ª—é—á–µ–π –ø–µ—Ä–µ–≤–æ–¥–∞. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –º–æ–≥—É—Ç –±—ã—Ç—å —Ö–∞—Ä–¥–∫–æ–¥–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ `UserProfile.vue`).

---

## 9. –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### 9.1 –§—É–Ω–∫—Ü–∏–∏ `yandexDiskService.js`

| –§—É–Ω–∫—Ü–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---------|-----------|
| `ensureFolderExists` | –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–æ–∫ |
| `uploadFile` | –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ (buffer + MIME) |
| `publishFile` | –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Ñ–∞–π–ª–∞ (–ø–æ–ª—É—á–µ–Ω–∏–µ public_url) |
| `deleteFile` | –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ |
| `moveFile` | –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ/–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ |
| `copyFile` | –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ |
| `listFolderDirectories` | –°–ø–∏—Å–æ–∫ –ø–æ–¥–ø–∞–ø–æ–∫ |
| `listFolderContents` | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ |
| `checkPathExists` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è |
| `deleteFolder` | –£–¥–∞–ª–µ–Ω–∏–µ –ø–∞–ø–∫–∏ |

### 9.2 –ü—Ä–æ–±–ª–µ–º—ã

| # | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ | –§–∞–π–ª:–°—Ç—Ä–æ–∫–∞ |
|---|------------|----------|-------------|
| Y1 | üü° | **–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ `checkPathExists`**: `response.ok` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Äî `makeYandexDiskRequest` —É–∂–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç parsed JSON, –∞ –Ω–µ Response | `api/services/yandexDiskService.js:444` |
| Y2 | üü° | **–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ `listFolderContents`**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `response.ok` –∏ `response.json()` –Ω–∞ —É–∂–µ parsed –¥–∞–Ω–Ω—ã—Ö | `api/services/yandexDiskService.js:464-469` |
| Y3 | üü° | **–ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–∏–º–∏—Ç–æ–≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞** –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π | ‚Äî |
| Y4 | üü° | **–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω** `YANDEX_DISK_TOKEN` ‚Äî –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω —Å–Ω–∞—Ä—É–∂–∏ –º–æ–¥—É–ª—è | `api/services/yandexDiskService.js:501` |
| Y5 | üü¢ | **–ù–µ—Ç retry-–ª–æ–≥–∏–∫–∏** –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–∫–∞—Ö –∫ API –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞ | ‚Äî |
| Y6 | üü¢ | Race condition –ø—Ä–∏ `ensureFolderExists` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è (409 Conflict) | ‚úÖ |

---

## 10. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### 10.1 –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–í—Å–µ–≥–æ **83 .md —Ñ–∞–π–ª–∞** –≤ `docs/`. –û—Ö–≤–∞—Ç:
- ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (`docs/ARCHITECTURE.md`)
- ‚úÖ –î–µ–ø–ª–æ–π (`docs/DEPLOYMENT.md`)
- ‚úÖ Telegram-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (2 —Ñ–∞–π–ª–∞)
- ‚úÖ Tribute webhook (`docs/TRIBUTE_WEBHOOK_SETUP.md`)
- ‚úÖ Composables (28 —Ñ–∞–π–ª–æ–≤ –≤ `docs/technical/composables/`)
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (11 —Ñ–∞–π–ª–æ–≤)
- ‚úÖ Stores (5 —Ñ–∞–π–ª–æ–≤)
- ‚úÖ Utils (3 —Ñ–∞–π–ª–∞)
- ‚úÖ Routes (3 —Ñ–∞–π–ª–∞)

### 10.2 –ù–µ–¥–æ—Å—Ç–∞—é—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| # | –î–æ–∫—É–º–µ–Ω—Ç | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
|---|---------|-------------|
| 1 | OpenAPI/Swagger —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è API | üü° |
| 2 | –ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (ER-–¥–∏–∞–≥—Ä–∞–º–º–∞) | üü° |
| 3 | –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (`.env.example` –Ω–µ–ø–æ–ª–Ω—ã–π ‚Äî –Ω–µ—Ç YANDEX_DISK_*) | üü° |
| 4 | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫—Ä–æ–Ω-–∑–∞–¥–∞—á —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º –∏ –ª–æ–≥–∏–∫–æ–π | üü° |
| 5 | –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫ (flow, grace-–ø–µ—Ä–∏–æ–¥, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞) | üü° |
| 6 | CONTRIBUTING.md –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ | üü¢ |
| 7 | –û–ø–∏—Å–∞–Ω–∏–µ Yandex.Disk –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫, API) | üü¢ |

---

## –ü—Ä–∏–æ—Ä–∏—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ã–µ (–∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)

| # | –û–ø–∏—Å–∞–Ω–∏–µ | –§–∞–π–ª | –û—Ü–µ–Ω–∫–∞ |
|---|---------|------|--------|
| 1 | –£–±—Ä–∞—Ç—å —Ö–∞—Ä–¥–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JWT secret fallback –∏–∑ socket.js | `api/socket.js:4` | 5 –º–∏–Ω |
| 2 | –ò—Å–ø—Ä–∞–≤–∏—Ç—å SQL-–∏–Ω—ä–µ–∫—Ü–∏—é –≤ `checkUsageLimit.js` ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å whitelist –¥–ª—è `limitFeatureName` | `api/middleware/checkUsageLimit.js:32` | 30 –º–∏–Ω |
| 3 | –ò—Å–ø—Ä–∞–≤–∏—Ç—å SQL-–∏–Ω—ä–µ–∫—Ü–∏—é –≤ admin routes ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞—Ç—å WHERE-—É—Å–ª–æ–≤–∏—è | `api/routes/admin/stats.js:91`, `admin/users.js:36` | 1 —á–∞—Å |
| 4 | –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ cron: –∑–∞–¥–∞—á–∏ 1 –∏ 2 –Ω–∞ –æ–¥–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ | `api/cron/tasks.js:758,766` | 5 –º–∏–Ω |
| 5 | –ò—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–≥ `guestPlanId` ‚Üí `guestPlan.id` –≤ `switchDemoToGuest` | `api/cron/tasks.js:557` | 5 –º–∏–Ω |
| 6 | –ò—Å–ø—Ä–∞–≤–∏—Ç—å URL `https://fohow.ru/dashboard` –∏ `https://fohow.ru/tutorials` –≤ `getWelcomeMessage` | `api/templates/telegramTemplates.js:119,162` | 10 –º–∏–Ω |
| 7 | –î–æ–±–∞–≤–∏—Ç—å YANDEX_DISK_TOKEN –∏ YANDEX_DISK_BASE_DIR –≤ `.env.example` | `api/.env.example` | 5 –º–∏–Ω |
| 8 | –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å JWT payload field: `decoded.userId` vs `decoded.id` –≤ socket.js | `api/socket.js:24` | 15 –º–∏–Ω |

### üü° –°—Ä–µ–¥–Ω–∏–µ (–∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤ –±–ª–∏–∂–∞–π—à–µ–º —Å–ø—Ä–∏–Ω—Ç–µ)

| # | –û–ø–∏—Å–∞–Ω–∏–µ | –§–∞–π–ª |
|---|---------|------|
| 9 | –î–æ–±–∞–≤–∏—Ç—å rate limiting –Ω–∞ auth-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (login, register, forgot-password, verification-code) | `api/routes/auth.js` |
| 10 | –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å CORS –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ | `api/server.js:75`, `api/socket.js:9` |
| 11 | –î–æ–±–∞–≤–∏—Ç—å MIME-—Ç–∏–ø –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ | `api/routes/images/myLibrary.js` |
| 12 | –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É 404 –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ —Ä–æ—É—Ç–µ—Ä —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ | `src/router/index.js` |
| 13 | –í–Ω–µ–¥—Ä–∏—Ç—å lazy loading –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –º–∞—Ä—à—Ä—É—Ç–æ–≤ | `src/router/index.js` |
| 14 | –ò—Å–ø—Ä–∞–≤–∏—Ç—å `checkPathExists` –∏ `listFolderContents` –≤ yandexDiskService | `api/services/yandexDiskService.js:444,464` |
| 15 | –î–æ–±–∞–≤–∏—Ç—å retry-–ª–æ–≥–∏–∫—É –≤ Telegram-—Å–µ—Ä–≤–∏—Å | `api/utils/telegramService.js` |
| 16 | –î–æ–±–∞–≤–∏—Ç—å cron-–∑–∞–¥–∞—á—É –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ `telegram_link_codes` | `api/cron/tasks.js` |
| 17 | –î–æ–±–∞–≤–∏—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ cron-–∑–∞–¥–∞—á | `api/cron/tasks.js` |
| 18 | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ CASCADE DELETE –Ω–∞ –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–∞—Ö | –ú–∏–≥—Ä–∞—Ü–∏–∏ / —Å—Ö–µ–º–∞ –ë–î |
| 19 | –ó–∞–º–µ–Ω–∏—Ç—å `SELECT *` –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø–æ–ª—è –≤ 9 –∑–∞–ø—Ä–æ—Å–∞—Ö | –†–∞–∑–ª–∏—á–Ω—ã–µ route-—Ñ–∞–π–ª—ã |
| 20 | –ù–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `YANDEX_DISK_TOKEN` –∏–∑ —Å–µ—Ä–≤–∏—Å–∞ | `api/services/yandexDiskService.js:501` |
| 21 | –£–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç `GET /api/test-auth` | `api/routes/auth.js:111` |
| 22 | –£–¥–∞–ª–∏—Ç—å `drawing.usage.example.js` –∏–∑ production | `src/stores/drawing.usage.example.js` |

### üü¢ –ú–µ–ª–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è (backlog)

| # | –û–ø–∏—Å–∞–Ω–∏–µ | –§–∞–π–ª |
|---|---------|------|
| 23 | –†–∞–∑–±–∏—Ç—å `useProjectActions.js` (2043 —Å—Ç—Ä–æ–∫) | `src/composables/useProjectActions.js` |
| 24 | –†–∞–∑–±–∏—Ç—å `UserProfile.vue` (4223 —Å—Ç—Ä–æ–∫) –Ω–∞ sub-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã | `src/components/UserProfile.vue` |
| 25 | –†–∞–∑–±–∏—Ç—å `CanvasBoard.vue` (3552 —Å—Ç—Ä–æ–∫) | `src/components/Canvas/CanvasBoard.vue` |
| 26 | –†–∞–∑–±–∏—Ç—å `admin/images.js` (1620 —Å—Ç—Ä–æ–∫) | `api/routes/admin/images.js` |
| 27 | –ü—Ä–∏–≤–µ—Å—Ç–∏ route-—Ñ—É–Ω–∫—Ü–∏–∏ –∫ –µ–¥–∏–Ω–æ–º—É —Å—Ç–∏–ª—é `(app)` | `api/routes/partners.js`, `favorites.js`, `users.js`, `relationships.js` |
| 28 | –í—ã–Ω–µ—Å—Ç–∏ `getDaysWord` –≤ –æ–±—â–∏–π —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–π –º–æ–¥—É–ª—å | 3 —Ñ–∞–π–ª–∞ |
| 29 | –£–¥–∞–ª–∏—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Ö—É–∫–∏ –∏–∑ server.js | `api/server.js:108-136` |
| 30 | –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–π –ª–æ–≥ WebSocket | `api/server.js:265` |
| 31 | –ù–∞—Å—Ç—Ä–æ–∏—Ç—å connection pool –≤ db.js (max, timeouts) | `api/db.js` |
| 32 | –ü—Ä–∏–≤–µ—Å—Ç–∏ –Ω—É–º–µ—Ä–∞—Ü–∏—é –º–∏–≥—Ä–∞—Ü–∏–π –∫ –µ–¥–∏–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É | `api/migrations/` |
| 33 | –î–æ–±–∞–≤–∏—Ç—å graceful shutdown –¥–ª—è Telegram –±–æ—Ç–∞ | `api/bot/telegramBot.js` |
| 34 | –£–¥–∞–ª–∏—Ç—å console.log –∏–∑ production (navigation guard) | `src/router/index.js:55,71,76,81` |
