# ğŸ“± FOHOW Interactive Board - Telegram Integration System
## ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¾Ğ²

---

## ğŸ“Œ ĞĞ³Ğ»Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ

1. [ĞĞ±Ğ·Ğ¾Ñ€ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹](#Ğ¾Ğ±Ğ·Ğ¾Ñ€-ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹)
2. [ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¸ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²](#Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°-Ğ¸-ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°-Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²)
3. [Ğ¡Ñ…ĞµĞ¼Ğ° Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…](#ÑÑ…ĞµĞ¼Ğ°-Ğ±Ğ°Ğ·Ñ‹-Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)
4. [ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹](#ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹-ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹)
5. [API Endpoints](#api-endpoints)
6. [Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ñ‹ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹](#ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ‹-ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹)
7. [ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ](#Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ñ‹-Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ)
8. [ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ](#Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ-Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ)
9. [ĞŸÑ€Ğ¾Ñ†ĞµÑÑ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ°](#Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ-Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸-Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ°)
10. [ĞÑ‚Ğ»Ğ°Ğ´ĞºĞ° Ğ¸ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ](#Ğ¾Ñ‚Ğ»Ğ°Ğ´ĞºĞ°-Ğ¸-Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)

---

## ğŸ¯ ĞĞ±Ğ·Ğ¾Ñ€ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

### ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ
Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Telegram-Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑĞµÑ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼ FOHOW Interactive Board:
- **ĞŸÑ€Ğ¸Ğ²ÑĞ·Ğ°Ñ‚ÑŒ** Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚ Telegram Ğº Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ñ Ğ½Ğ° ÑĞ°Ğ¹Ñ‚Ğµ
- **ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°Ñ‚ÑŒ** ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ¾ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞµ, Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ°Ñ…, Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸ÑÑ…
- **Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑ‚ÑŒ** ÑĞ²Ğ¾Ğ¸Ğ¼ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ĞµĞ¼ Ñ‡ĞµÑ€ĞµĞ· ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ Ğ±Ğ¾Ñ‚Ğ°
- **ĞÑ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ñ‚ÑŒ** Ğ²Ğ°Ğ¶Ğ½Ñ‹Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸

### ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸
âœ… ĞŸÑ€Ğ¸Ğ²ÑĞ·ĞºĞ° Telegram-Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ° Ñ ĞºĞ¾Ğ´Ğ¾Ğ¼ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ½Ğ¾ÑÑ‚Ğ¸ (15 Ğ¼Ğ¸Ğ½ÑƒÑ‚)  
âœ… ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ñ… ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹ (Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸, Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ¸, Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ)  
âœ… ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸ Ñ‡ĞµÑ€ĞµĞ· polling  
âœ… ĞÑ‚Ğ²ÑĞ·ĞºĞ° Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ° Ñ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸ĞµĞ¼  
âœ… Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ñ‹ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ°Ğ¼Ğ¸ (inline keyboard)  
âœ… ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ĞºÑ€Ğ¾Ğ½-Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ğ´Ğ»Ñ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹  

### Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ğµ Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸
- **Backend**: Fastify + Node.js
- **Ğ‘Ğ”**: PostgreSQL
- **Telegram API**: node-telegram-bot-api (long polling)
- **Frontend**: Vue 3 + Pinia

---

## ğŸ“ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¸ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²

### ĞŸĞ¾Ğ»Ğ½Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
FOHOW-proekt-v3/
â”‚
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ bot/
â”‚   â”‚   â””â”€â”€ telegramBot.js                    â­ ĞĞ¡ĞĞĞ’ĞĞĞ™ Ğ‘ĞĞ¢ (Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ, Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´)
â”‚   â”‚
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â””â”€â”€ telegram.js                       â­ API ENDPOINTS (4 Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ°)
â”‚   â”‚       â”œâ”€â”€ POST /api/user/telegram/generate-code
â”‚   â”‚       â”œâ”€â”€ GET /api/user/telegram/check-link-status
â”‚   â”‚       â”œâ”€â”€ POST /api/user/connect-telegram
â”‚   â”‚       â””â”€â”€ POST /api/user/telegram/unlink
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ telegramService.js                â­ Ğ£Ğ¢Ğ˜Ğ›Ğ˜Ğ¢Ğ« (Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹)
â”‚   â”‚       â”œâ”€â”€ sendTelegramMessage()
â”‚   â”‚       â”œâ”€â”€ sendTelegramMessageWithButtons()
â”‚   â”‚       â”œâ”€â”€ checkBotConnection()
â”‚   â”‚       â””â”€â”€ sendTestMessage()
â”‚   â”‚
â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â””â”€â”€ telegramTemplates.js              â­ Ğ¨ĞĞ‘Ğ›ĞĞĞ« (7+ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹)
â”‚   â”‚       â”œâ”€â”€ getSubscriptionExpiringMessage()
â”‚   â”‚       â”œâ”€â”€ getSubscriptionExpiredMessage()
â”‚   â”‚       â”œâ”€â”€ getSubscriptionActivatedMessage()
â”‚   â”‚       â”œâ”€â”€ getSubscriptionCancelledMessage()
â”‚   â”‚       â”œâ”€â”€ getTelegramDisconnectedMessage()
â”‚   â”‚       â””â”€â”€ Ğ´Ñ€ÑƒĞ³Ğ¸Ğµ...
â”‚   â”‚
â”‚   â”œâ”€â”€ cron/
â”‚   â”‚   â””â”€â”€ tasks.js                          â­ ĞšĞ ĞĞ-Ğ—ĞĞ”ĞĞ§Ğ˜ (Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ)
â”‚   â”‚
â”‚   â”œâ”€â”€ server.js                             â­ Ğ˜ĞĞ˜Ğ¦Ğ˜ĞĞ›Ğ˜Ğ—ĞĞ¦Ğ˜Ğ¯ Ğ‘ĞĞ¢Ğ
â”‚   â”‚
â”‚   â””â”€â”€ db.js                                 â­ ĞŸĞĞ”ĞšĞ›Ğ®Ğ§Ğ•ĞĞ˜Ğ• Ğ‘Ğ”
â”‚
â”œâ”€â”€ src/ (Frontend)
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ TelegramLinkWidget.vue            â­ Ğ’Ğ˜Ğ”Ğ–Ğ•Ğ¢ ĞŸĞ Ğ˜Ğ’Ğ¯Ğ—ĞšĞ˜
â”‚   â”‚   â”œâ”€â”€ UserProfile.vue                   â­ ĞŸĞĞ›Ğ• @USERNAME
â”‚   â”‚   â””â”€â”€ PartnersPanel.vue                 â­ ĞĞ¢ĞĞ‘Ğ ĞĞ–Ğ•ĞĞ˜Ğ• @USERNAME ĞŸĞĞ Ğ¢ĞĞĞ ĞĞ’
â”‚   â”‚
â”‚   â””â”€â”€ composables/
â”‚       â”œâ”€â”€ useProjectActions.js
â”‚       â”œâ”€â”€ useUserSocial.js
â”‚       â””â”€â”€ useUserPrivacy.js
â”‚
â””â”€â”€ docs/
    â”œâ”€â”€ TELEGRAM_INTEGRATION.md               â­ Ğ”ĞĞšĞ£ĞœĞ•ĞĞ¢ĞĞ¦Ğ˜Ğ¯
    â””â”€â”€ [Ğ²Ğ°Ñˆ Ñ„Ğ°Ğ¹Ğ» Ğ±ÑƒĞ´ĞµÑ‚ Ğ·Ğ´ĞµÑÑŒ]
```

### Ğ˜ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ñ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²

```
Fastify Server (server.js)
    â†“
registerTelegramRoutes() (telegram.js)
    â”œâ”€â”€ initializeTelegramBot() (telegramBot.js)
    â”‚   â”œâ”€â”€ bot.onText(/\/start/) â†’ handleLinkCode()
    â”‚   â””â”€â”€ bot.on('polling_error')
    â”‚
    â””â”€â”€ API Endpoints
        â”œâ”€â”€ /api/user/telegram/generate-code
        â”‚   â””â”€â”€ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ ĞºĞ¾Ğ´ Ğ² Ğ‘Ğ” (telegram_link_codes)
        â”‚
        â”œâ”€â”€ /api/user/telegram/check-link-status
        â”‚   â””â”€â”€ Polling Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° (users.telegram_chat_id)
        â”‚
        â”œâ”€â”€ /api/user/connect-telegram
        â”‚   â””â”€â”€ ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ users (telegram_chat_id, telegram_user)
        â”‚
        â””â”€â”€ /api/user/telegram/unlink
            â””â”€â”€ ĞĞ±Ğ½ÑƒĞ»ÑĞµÑ‚ telegram_* Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ
```

---

## ğŸ’¾ Ğ¡Ñ…ĞµĞ¼Ğ° Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° 1: `users` (ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ°Ñ, Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ° Telegram Ğ¿Ğ¾Ğ»ÑĞ¼Ğ¸)

```sql
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    full_name VARCHAR(255),
    
    -- Telegram Ğ¿Ğ¾Ğ»Ñ (ĞĞĞ’Ğ«Ğ•)
    telegram_chat_id VARCHAR(255) UNIQUE,        -- ID Ñ‡Ğ°Ñ‚Ğ° Ğ² Telegram (ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹)
    telegram_user VARCHAR(255),                  -- Username Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ (@username)
    telegram_channel VARCHAR(255),               -- ĞšĞ°Ğ½Ğ°Ğ»/Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ° (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° 2: `telegram_link_codes` (ĞĞĞ’ĞĞ¯)

```sql
CREATE TABLE telegram_link_codes (
    id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    code VARCHAR(10) UNIQUE NOT NULL,            -- 6-ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»ÑŒĞ½Ñ‹Ğ¹ ĞºĞ¾Ğ´ (Ğ±ÑƒĞºĞ²Ñ‹ + Ñ†Ğ¸Ñ„Ñ€Ñ‹)
    expires_at TIMESTAMP NOT NULL,               -- TTL: 15 Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ğ¾Ñ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ
    used BOOLEAN DEFAULT FALSE,                  -- Ğ¤Ğ»Ğ°Ğ³ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ ĞºĞ¾Ğ´Ğ°
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹ Ğ´Ğ»Ñ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

```sql
-- Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº Ğ¿Ğ¾ ĞºĞ¾Ğ´Ñƒ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸
CREATE INDEX idx_telegram_link_codes_code ON telegram_link_codes(code);

-- Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
CREATE INDEX idx_telegram_link_codes_user_id ON telegram_link_codes(user_id);

-- Ğ‘Ñ‹ÑÑ‚Ñ€Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸ Ğ¿Ğ¾ chat_id
CREATE INDEX idx_users_telegram_chat_id ON users(telegram_chat_id);

-- Ğ‘Ñ‹ÑÑ‚Ñ€Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸ Ğ¿Ğ¾ username
CREATE INDEX idx_users_telegram_user ON users(telegram_user);
```

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ SQL Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²

**ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ĞµÑÑ‚ÑŒ Ğ»Ğ¸ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ñƒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ:**
```sql
SELECT telegram_chat_id, telegram_user 
FROM users 
WHERE id = $1;
```

**Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ´ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸:**
```sql
INSERT INTO telegram_link_codes (user_id, code, expires_at) 
VALUES ($1, $2, NOW() + INTERVAL '15 minutes')
RETURNING code, expires_at;
```

**ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ½Ğ¾ÑÑ‚ÑŒ ĞºĞ¾Ğ´Ğ°:**
```sql
SELECT user_id, used, expires_at 
FROM telegram_link_codes 
WHERE code = $1;
```

**ĞÑ‚Ğ¼ĞµÑ‚Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ´ ĞºĞ°Ğº Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹:**
```sql
UPDATE telegram_link_codes 
SET used = true 
WHERE code = $1;
```

**ĞŸÑ€Ğ¸Ğ²ÑĞ·Ğ°Ñ‚ÑŒ Telegram Ğº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ:**
```sql
UPDATE users 
SET telegram_chat_id = $1, telegram_user = $2, updated_at = NOW() 
WHERE id = $3;
```

**ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¿Ğ¾ chat_id:**
```sql
SELECT id, email, full_name 
FROM users 
WHERE telegram_chat_id = $1;
```

---

## ğŸ”§ ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

### 1. ğŸ¤– `/api/bot/telegramBot.js` - ĞĞ¡ĞĞĞ’ĞĞĞ™ Ğ‘ĞĞ¢

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ±Ğ¾Ñ‚Ğ°, Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´ `/start`, Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ°

#### Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:

##### `initializeTelegramBot()`
- **ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ:** Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ Telegram Ğ±Ğ¾Ñ‚Ğ° Ñ long polling
- **Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚:** Ğ­ĞºĞ·ĞµĞ¼Ğ¿Ğ»ÑÑ€ Ğ±Ğ¾Ñ‚Ğ° Ğ¸Ğ»Ğ¸ `null` ĞµÑĞ»Ğ¸ Ñ‚Ğ¾ĞºĞµĞ½Ğ° Ğ½ĞµÑ‚
- **Ğ’Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ:** ĞŸÑ€Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑĞºĞµ ÑĞµÑ€Ğ²ĞµÑ€Ğ° Ğ² `server.js`
- **Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ:**
  1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ `TELEGRAM_BOT_TOKEN` Ğ² `.env`
  2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ ÑĞºĞ·ĞµĞ¼Ğ¿Ğ»ÑÑ€ Ğ±Ğ¾Ñ‚Ğ°
  3. Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº `/start` ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹
  4. Ğ›Ğ¾Ğ³Ğ¸Ñ€ÑƒĞµÑ‚ `âœ… Telegram Ğ±Ğ¾Ñ‚ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½`

```javascript
// Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:
import { initializeTelegramBot, getBot } from '../bot/telegramBot.js';

const bot = initializeTelegramBot();
if (bot) {
    console.log('Ğ‘Ğ¾Ñ‚ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½');
}
```

##### `handleLinkCode(chatId, username, firstName, code)` (INTERNAL)
- **ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ:** ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ `/start ĞšĞĞ”` Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ°
- **ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
  - `chatId` â€” ID Ñ‡Ğ°Ñ‚Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ² Telegram
  - `username` â€” @username Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ² Telegram
  - `firstName` â€” Ğ˜Ğ¼Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
  - `code` â€” 6-ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»ÑŒĞ½Ñ‹Ğ¹ ĞºĞ¾Ğ´ Ğ¸Ğ· Ğ‘Ğ”
  
- **ĞŸÑ€Ğ¾Ñ†ĞµÑÑ:**
  1. Ğ˜Ñ‰ĞµÑ‚ ĞºĞ¾Ğ´ Ğ² `telegram_link_codes`
  2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚: ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ»Ğ¸, Ğ½Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½ Ğ»Ğ¸, Ğ½Ğµ Ğ¸ÑÑ‚Ñ‘Ğº Ğ»Ğ¸ (15 Ğ¼Ğ¸Ğ½)
  3. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚: Ğ½Ğµ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½ Ğ»Ğ¸ ÑÑ‚Ğ¾Ñ‚ Telegram Ğº Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¼Ñƒ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ñƒ
  4. ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ `users.telegram_chat_id` Ğ¸ `users.telegram_user`
  5. ĞÑ‚Ğ¼ĞµÑ‡Ğ°ĞµÑ‚ ĞºĞ¾Ğ´ ĞºĞ°Ğº Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ (`used = true`)
  6. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ Ğ² Telegram

- **Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ¾Ğ± Ğ¾ÑˆĞ¸Ğ±ĞºĞµ:**
  - âŒ ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´
  - âŒ ĞšĞ¾Ğ´ ÑƒĞ¶Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½
  - â° ĞšĞ¾Ğ´ Ğ¸ÑÑ‚Ñ‘Ğº
  - âš ï¸ ĞĞºĞºĞ°ÑƒĞ½Ñ‚ ÑƒĞ¶Ğµ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½

##### `sendWelcomeMessage(chatId, firstName)` (INTERNAL)
- **ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ:** ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ¿Ñ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğµ `/start`
- **Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ:**
  1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½ Ğ»Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ
  2. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ğ¸ Ğ¿Ğ¾ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞµ
  3. ĞŸÑ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°ĞµÑ‚ ÑÑÑ‹Ğ»ĞºĞ¸ Ğ½Ğ° ÑĞ°Ğ¹Ñ‚, ĞºĞ°Ğ½Ğ°Ğ», Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºÑƒ

#### ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹:

**bot.onText(/\/start(.*)/)**
- Ğ¡Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ½Ğ°: `/start` Ğ¸ `/start ĞšĞĞ”`
- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğµ ĞºĞ¾Ğ´Ğ°
  - Ğ•ÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ â†’ `handleLinkCode()`
  - Ğ•ÑĞ»Ğ¸ Ğ½ĞµÑ‚ â†’ `sendWelcomeMessage()`

**bot.on('polling_error')**
- Ğ›Ğ¾Ğ³Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ long polling
- ĞĞµ Ğ¿Ñ€ĞµÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ğ±Ğ¾Ñ‚Ğ°

---

### 2. ğŸŒ `/api/routes/telegram.js` - API ENDPOINTS

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** REST API Ğ´Ğ»Ñ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´Ğ° Ñ Telegram

#### Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ²:
```javascript
registerTelegramRoutes(app);  // Ğ’Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ² server.js
```

#### Endpoint 1: `POST /api/user/telegram/generate-code`

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ´Ğ° Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸ Telegram

**ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:** âœ… Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ JWT Ñ‚Ğ¾ĞºĞµĞ½

**Request:**
```javascript
POST /api/user/telegram/generate-code
Header: Authorization: Bearer JWT_TOKEN
```

**Response (200 OK):**
```json
{
  "success": true,
  "code": "ABC123",
  "expiresAt": "2026-01-16T14:09:45.123Z",
  "botUsername": "fohow_bot"
}
```

**Ğ›Ğ¾Ğ³Ğ¸ĞºĞ°:**
1. Ğ˜Ğ·Ğ²Ğ»ĞµĞºĞ°ĞµÑ‚ `user_id` Ğ¸Ğ· JWT
2. Ğ£Ğ´Ğ°Ğ»ÑĞµÑ‚ ÑÑ‚Ğ°Ñ€Ñ‹Ğµ Ğ½ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ ĞºĞ¾Ğ´Ñ‹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
3. Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ 6-ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»ÑŒĞ½Ñ‹Ğ¹ ĞºĞ¾Ğ´
4. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Ğ² `telegram_link_codes` Ñ TTL 15 Ğ¼Ğ¸Ğ½ÑƒÑ‚
5. Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ ĞºĞ¾Ğ´, Ğ²Ñ€ĞµĞ¼Ñ Ğ¸ÑÑ‚ĞµÑ‡ĞµĞ½Ğ¸Ñ, username Ğ±Ğ¾Ñ‚Ğ°

**ĞÑˆĞ¸Ğ±ĞºĞ¸:**
- 500: ĞÑˆĞ¸Ğ±ĞºĞ° ÑĞµÑ€Ğ²ĞµÑ€Ğ°

---

#### Endpoint 2: `GET /api/user/telegram/check-link-status`

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Polling Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸ (Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´Ğ¾Ğ¼)

**ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:** âœ… Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ JWT Ñ‚Ğ¾ĞºĞµĞ½

**Request:**
```javascript
GET /api/user/telegram/check-link-status
Header: Authorization: Bearer JWT_TOKEN
```

**Response (200 OK) - ĞŸÑ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½Ğ¾:**
```json
{
  "success": true,
  "linked": true,
  "telegram": {
    "chat_id": "123456789",
    "username": "john_doe"
  }
}
```

**Response (200 OK) - ĞĞµ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½Ğ¾:**
```json
{
  "success": true,
  "linked": false,
  "telegram": null
}
```

**Ğ›Ğ¾Ğ³Ğ¸ĞºĞ°:**
1. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ `user_id` Ğ¸Ğ· JWT
2. Ğ—Ğ°Ğ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°ĞµÑ‚ Ğ¸Ğ· Ğ‘Ğ”: `telegram_chat_id`, `telegram_user`
3. Ğ•ÑĞ»Ğ¸ `telegram_chat_id` Ğ½Ğµ NULL â†’ `linked: true`
4. Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ ÑÑ‚Ğ°Ñ‚ÑƒÑ

**Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ° Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´Ğµ:**
```javascript
// Polling ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 2 ÑĞµĞºÑƒĞ½Ğ´Ñ‹ Ğ² Ñ†Ğ¸ĞºĞ»Ğµ
const interval = setInterval(async () => {
  const response = await fetch('/api/user/telegram/check-link-status', {
    headers: { 'Authorization': `Bearer ${token}` }
  });
  const data = await response.json();
  if (data.linked) {
    clearInterval(interval);
    showSuccess('ĞŸÑ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½Ğ¾!');
  }
}, 2000);
```

**ĞÑˆĞ¸Ğ±ĞºĞ¸:**
- 404: ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½
- 500: ĞÑˆĞ¸Ğ±ĞºĞ° ÑĞµÑ€Ğ²ĞµÑ€Ğ°

---

#### Endpoint 3: `POST /api/user/connect-telegram`

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞŸÑ€Ğ¸Ğ²ÑĞ·ĞºĞ° Telegram (Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ±Ğ¾Ñ‚Ğ¾Ğ¼ Ğ¿Ğ¾ÑĞ»Ğµ `/start ĞšĞĞ”`)

**ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:** âœ… Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ JWT Ñ‚Ğ¾ĞºĞµĞ½ (Ğ½Ğ¾ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ²Ñ‹Ğ·Ğ²Ğ°Ğ½ Ğ±Ğ¾Ñ‚Ğ¾Ğ¼)

**Request:**
```json
POST /api/user/connect-telegram
Header: Authorization: Bearer JWT_TOKEN
Content-Type: application/json

{
  "telegram_chat_id": "123456789",
  "telegram_username": "john_doe"
}
```

**Response (200 OK):**
```json
{
  "success": true,
  "message": "Telegram ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½ Ğº Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ñƒ",
  "telegram": {
    "chat_id": "123456789",
    "username": "john_doe"
  }
}
```

**Ğ›Ğ¾Ğ³Ğ¸ĞºĞ°:**
1. Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€ÑƒĞµÑ‚ `telegram_chat_id`
2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Ğ½Ğµ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½ Ğ»Ğ¸ ÑÑ‚Ğ¾Ñ‚ Telegram Ğº Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¼Ñƒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
3. ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ Ğ² Ğ‘Ğ”: `users.telegram_chat_id`, `users.telegram_user`
4. Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ

**ĞÑˆĞ¸Ğ±ĞºĞ¸:**
- 400: ĞŸÑƒÑÑ‚Ğ¾Ğ¹ chat_id
- 409: Telegram ÑƒĞ¶Ğµ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½ Ğº Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¼Ñƒ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ñƒ
- 404: ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½
- 500: ĞÑˆĞ¸Ğ±ĞºĞ° ÑĞµÑ€Ğ²ĞµÑ€Ğ°

**Ğ’Ñ‹Ğ·Ğ¾Ğ² Ğ¸Ğ· Ğ±Ğ¾Ñ‚Ğ°:**
```javascript
// Ğ’ handleLinkCode() Ğ¿Ğ¾ÑĞ»Ğµ Ğ²ÑĞµÑ… Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¾Ğº:
const connectResponse = await fetch('http://localhost:4000/api/user/connect-telegram', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${internalToken}`
  },
  body: JSON.stringify({
    telegram_chat_id: chatId.toString(),
    telegram_username: username
  })
});
```

---

#### Endpoint 4: `POST /api/user/telegram/unlink`

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞÑ‚Ğ²ÑĞ·ĞºĞ° Telegram Ğ¾Ñ‚ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ°

**ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:** âœ… Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ JWT Ñ‚Ğ¾ĞºĞµĞ½

**Request:**
```javascript
POST /api/user/telegram/unlink
Header: Authorization: Bearer JWT_TOKEN
```

**Response (200 OK):**
```json
{
  "success": true,
  "message": "Telegram ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ¾Ñ‚ĞºĞ»ÑÑ‡ĞµĞ½ Ğ¾Ñ‚ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ°"
}
```

**Ğ›Ğ¾Ğ³Ğ¸ĞºĞ°:**
1. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ `user_id` Ğ¸Ğ· JWT
2. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ ÑÑ‚Ğ°Ñ€Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ `telegram_chat_id` (Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ)
3. ĞĞ±Ğ½ÑƒĞ»ÑĞµÑ‚ Ğ² Ğ‘Ğ”: `telegram_chat_id`, `telegram_user`, `telegram_channel`
4. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ² Telegram Ğ¾Ğ± Ğ¾Ñ‚Ğ²ÑĞ·ĞºĞµ
5. Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ

**Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ² Telegram:**
- ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ: "Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ¾Ñ‚ĞºĞ»ÑÑ‡ĞµĞ½Ñ‹"
- Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ñ‡Ñ‚Ğ¾ Ğ¾Ğ½ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ Ğ½Ğµ Ğ±ÑƒĞ´ĞµÑ‚ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°Ñ‚ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ
- ĞŸÑ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°ĞµÑ‚ ÑÑÑ‹Ğ»ĞºÑƒ Ğ½Ğ° Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ñ

**ĞÑˆĞ¸Ğ±ĞºĞ¸:**
- 404: ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½
- 500: ĞÑˆĞ¸Ğ±ĞºĞ° ÑĞµÑ€Ğ²ĞµÑ€Ğ°

---

### 3. ğŸ“¨ `/api/utils/telegramService.js` - Ğ£Ğ¢Ğ˜Ğ›Ğ˜Ğ¢Ğ«

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞĞ¸Ğ·ĞºĞ¾ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ²Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ² Telegram

#### Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ: `sendTelegramMessage(chatId, text, options)`

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ:** ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ³Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ² Telegram

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `chatId` (string | number) â€” ID Ñ‡Ğ°Ñ‚Ğ° Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°Ñ‚ĞµĞ»Ñ **[ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ•Ğ]**
- `text` (string) â€” Ğ¢ĞµĞºÑÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ **[ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ•Ğ]**
- `options` (object) â€” Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¾Ğ¿Ñ†Ğ¸Ğ¸ **[ĞĞŸĞ¦Ğ˜ĞĞĞĞ›Ğ¬ĞĞ]**

**Options:**
```javascript
{
  parse_mode: 'HTML',                          // HTML Ğ¸Ğ»Ğ¸ Markdown
  disable_web_page_preview: false,             // ĞÑ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ñ€ĞµĞ²ÑŒÑ ÑÑÑ‹Ğ»Ğ¾Ğº
  disable_notification: false,                 // ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ±ĞµĞ· Ğ·Ğ²ÑƒĞºĞ°
  reply_to_message_id: null                    // ID ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°
}
```

**Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚:** Promise Ñ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ¼
```javascript
{
  success: true,
  messageId: 12345,
  chatId: "123456789",
  timestamp: "2026-01-16T14:09:45.123Z"
}
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**
```javascript
import { sendTelegramMessage } from '../utils/telegramService.js';

try {
  const result = await sendTelegramMessage(
    "123456789",
    "ğŸ‰ <b>ĞŸÑ€Ğ¸Ğ²ĞµÑ‚!</b>\nĞ­Ñ‚Ğ¾ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ",
    { parse_mode: 'HTML' }
  );
  console.log('ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾:', result.messageId);
} catch (error) {
  console.error('ĞÑˆĞ¸Ğ±ĞºĞ°:', error.message);
}
```

**Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:**
```
ğŸ“± ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Telegram ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ² Ñ‡Ğ°Ñ‚: 123456789
   Ğ¢ĞµĞºÑÑ‚: ğŸ‰ ĞŸÑ€Ğ¸Ğ²ĞµÑ‚! Ğ­Ñ‚Ğ¾ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ğ¾Ğµ...
âœ… Telegram ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾
   Message ID: 12345
   Ğ§Ğ°Ñ‚ ID: 123456789
   Ğ’Ñ€ĞµĞ¼Ñ: 2026-01-16T14:09:45.123Z
```

---

#### Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ: `sendTelegramMessageWithButtons(chatId, text, buttons, options)`

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ:** ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ñ inline-ĞºĞ½Ğ¾Ğ¿ĞºĞ°Ğ¼Ğ¸

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `chatId` (string | number) â€” ID Ñ‡Ğ°Ñ‚Ğ° **[ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ•Ğ]**
- `text` (string) â€” Ğ¢ĞµĞºÑÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ **[ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ•Ğ]**
- `buttons` (array) â€” ĞœĞ°ÑÑĞ¸Ğ² ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº **[ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ•Ğ]**
- `options` (object) â€” ĞĞ¿Ñ†Ğ¸Ğ¸ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ **[ĞĞŸĞ¦Ğ˜ĞĞĞĞ›Ğ¬ĞĞ]**

**Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº:**
```javascript
[
  [
    { text: 'ĞšĞ½Ğ¾Ğ¿ĞºĞ° 1', callback_data: 'btn1' },
    { text: 'ĞšĞ½Ğ¾Ğ¿ĞºĞ° 2', url: 'https://example.com' }
  ],
  [
    { text: 'ĞšĞ½Ğ¾Ğ¿ĞºĞ° 3', callback_data: 'btn3' }
  ]
]
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**
```javascript
import { sendTelegramMessageWithButtons } from '../utils/telegramService.js';

await sendTelegramMessageWithButtons(
  "123456789",
  "Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ:",
  [
    [
      { text: 'âœ… ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ', callback_data: 'confirm' },
      { text: 'âŒ ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ', callback_data: 'cancel' }
    ]
  ],
  { parse_mode: 'HTML' }
);
```

---

#### Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ: `checkBotConnection()`

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ:** ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğº Telegram Bot API

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:** ĞĞµÑ‚

**Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚:** Promise Ñ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ¼ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ
```javascript
// ĞŸÑ€Ğ¸ ÑƒÑĞ¿ĞµÑ…Ğµ:
{
  connected: true,
  bot: {
    id: 987654321,
    firstName: "fohow_bot",
    username: "fohow_bot",
    canJoinGroups: true,
    canReadAllGroupMessages: false,
    supportsInlineQueries: false
  }
}

// ĞŸÑ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞµ:
{
  connected: false,
  error: "Unauthorized - Invalid token"
}
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**
```javascript
import { checkBotConnection } from '../utils/telegramService.js';

const status = await checkBotConnection();
if (status.connected) {
  console.log('Ğ‘Ğ¾Ñ‚ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½:', status.bot.username);
} else {
  console.error('ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ:', status.error);
}
```

---

#### Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ: `sendTestMessage(chatId)`

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ:** ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ğ¾Ğ³Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ¾ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ½Ğ¾ÑÑ‚Ğ¸

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `chatId` (string | number) â€” ID Ñ‡Ğ°Ñ‚Ğ° Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ°

**Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚:** Promise Ñ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ¼ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**
```javascript
import { sendTestMessage } from '../utils/telegramService.js';

await sendTestMessage("123456789");
// ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚: ğŸ§ª Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ğ¾Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ...
```

---

#### Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ: `checkTelegramConfig()`

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ:** ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ Telegram

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:** ĞĞµÑ‚

**Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚:** Object
```javascript
// Ğ•ÑĞ»Ğ¸ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¾:
{
  configured: true,
  missing: []
}

// Ğ•ÑĞ»Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°:
{
  configured: false,
  missing: ['TELEGRAM_BOT_TOKEN']
}
```

---

### 4. ğŸ¨ `/api/templates/telegramTemplates.js` - Ğ¨ĞĞ‘Ğ›ĞĞĞ« Ğ¡ĞĞĞ‘Ğ©Ğ•ĞĞ˜Ğ™

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ğµ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ‹ ĞºÑ€Ğ°ÑĞ¸Ğ²Ğ¾ Ğ¾Ñ„Ğ¾Ñ€Ğ¼Ğ»ĞµĞ½Ğ½Ñ‹Ñ… Telegram-ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹

#### Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½ 1: `getSubscriptionExpiringMessage(userName, daysLeft, expirationDate, renewUrl)`

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞŸÑ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğµ Ğ¾ ÑĞºĞ¾Ñ€Ğ¾Ğ¼ Ğ¸ÑÑ‚ĞµÑ‡ĞµĞ½Ğ¸Ğ¸ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `userName` (string) â€” Ğ˜Ğ¼Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
- `daysLeft` (number) â€” ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ´Ğ½ĞµĞ¹ Ğ´Ğ¾ Ğ¸ÑÑ‚ĞµÑ‡ĞµĞ½Ğ¸Ñ
- `expirationDate` (string) â€” Ğ”Ğ°Ñ‚Ğ° Ğ¸ÑÑ‚ĞµÑ‡ĞµĞ½Ğ¸Ñ (DD.MM.YYYY)
- `renewUrl` (string) â€” URL Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ»ĞµĞ½Ğ¸Ñ [Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾]

**Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚:**
```javascript
{
  text: "ğŸš¨ Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ, Ğ˜Ğ²Ğ°Ğ½!\n\nĞ’Ğ°ÑˆĞ° Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° Ğ¡Ğ ĞĞ§ĞĞ Ğ¸ÑÑ‚ĞµĞºĞ°ĞµÑ‚!\n\n...",
  parse_mode: 'Markdown',
  reply_markup: {
    inline_keyboard: [
      [{ text: 'ğŸ”„ ĞŸÑ€Ğ¾Ğ´Ğ»Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºÑƒ', url: renewUrl }]
    ]
  }
}
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€:**
```javascript
import { getSubscriptionExpiringMessage } from '../templates/telegramTemplates.js';

const msg = getSubscriptionExpiringMessage(
  "Ğ˜Ğ²Ğ°Ğ½",
  3,
  "20.01.2026",
  "https://interactive.marketingfohow.ru/pricing"
);

await sendTelegramMessage(chatId, msg.text, {
  parse_mode: msg.parse_mode,
  reply_markup: msg.reply_markup
});
```

**Ğ’Ğ½ĞµÑˆĞ½Ğ¸Ğ¹ Ğ²Ğ¸Ğ´ Ğ² Telegram:**
```
ğŸš¨ Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ, Ğ˜Ğ²Ğ°Ğ½!

Ğ’Ğ°ÑˆĞ° Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° Ğ¡Ğ ĞĞ§ĞĞ Ğ¸ÑÑ‚ĞµĞºĞ°ĞµÑ‚!

ğŸ“… ĞÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ: 3 Ğ´Ğ½Ñ
ğŸ—“ Ğ”Ğ°Ñ‚Ğ° Ğ¸ÑÑ‚ĞµÑ‡ĞµĞ½Ğ¸Ñ: 20.01.2026

ĞŸÑ€Ğ¾Ğ´Ğ»Ğ¸Ñ‚Ğµ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºÑƒ Ğ¿Ñ€ÑĞ¼Ğ¾ ÑĞµĞ¹Ñ‡Ğ°Ñ...

[ğŸ”„ ĞŸÑ€Ğ¾Ğ´Ğ»Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºÑƒ]
```

---

#### Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½ 2: `getSubscriptionExpiredMessage(userName, pricingUrl)`

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ¾Ğ± Ğ¸ÑÑ‚ĞµÑ‡ĞµĞ½Ğ¸Ğ¸ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `userName` (string) â€” Ğ˜Ğ¼Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
- `pricingUrl` (string) â€” URL Ñ Ñ‚Ğ°Ñ€Ğ¸Ñ„Ğ°Ğ¼Ğ¸ [Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾]

**Ğ’Ğ½ĞµÑˆĞ½Ğ¸Ğ¹ Ğ²Ğ¸Ğ´:**
```
ğŸ“‹ Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ, Ğ˜Ğ²Ğ°Ğ½!

Ğš ÑĞ¾Ğ¶Ğ°Ğ»ĞµĞ½Ğ¸Ñ, ÑÑ€Ğ¾Ğº Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ²Ğ°ÑˆĞµĞ¹ Ğ¿Ñ€ĞµĞ¼Ğ¸ÑƒĞ¼-Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸ Ğ¸ÑÑ‚Ñ‘Ğº.

ğŸ”„ ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğ½Ğ° Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½
Ğ’Ğ°Ñˆ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¿ĞµÑ€ĞµĞ²ĞµĞ´Ñ‘Ğ½ Ğ½Ğ° Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ğ¹ Ñ‚Ğ°Ñ€Ğ¸Ñ„...

ğŸ“¦ Ğ§Ñ‚Ğ¾ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ Ğ½Ğ° Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾Ğ¼ Ñ‚Ğ°Ñ€Ğ¸Ñ„Ğµ:
â€¢ ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ğ°Ğ¼
â€¢ Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ ÑĞµÑ€Ğ²Ğ¸ÑĞ°
â€¢ Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°

[â­ Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ñ‚Ğ°Ñ€Ğ¸Ñ„] [â“ Ğ—Ğ°Ğ´Ğ°Ñ‚ÑŒ Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ]
```

---

#### Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½ 3: `getSubscriptionActivatedMessage(userName, planName, amount, currency, expiresDate, boardsUrl)`

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¸ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `userName` (string) â€” Ğ˜Ğ¼Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
- `planName` (string) â€” ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‚Ğ°Ñ€Ğ¸Ñ„Ğ° ("Premium", "Individual")
- `amount` (number) â€” Ğ¡ÑƒĞ¼Ğ¼Ğ° Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ°
- `currency` (string) â€” Ğ’Ğ°Ğ»ÑÑ‚Ğ° ("RUB")
- `expiresDate` (string) â€” Ğ”Ğ°Ñ‚Ğ° Ğ¾ĞºĞ¾Ğ½Ñ‡Ğ°Ğ½Ğ¸Ñ (DD.MM.YYYY)
- `boardsUrl` (string) â€” URL Ğº Ğ´Ğ¾ÑĞºĞ°Ğ¼ [Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾]

**Ğ’Ğ½ĞµÑˆĞ½Ğ¸Ğ¹ Ğ²Ğ¸Ğ´:**
```
âœ… ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ°!

Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ, Ğ˜Ğ²Ğ°Ğ½!

ğŸ‰ Ğ¡Ğ¿Ğ°ÑĞ¸Ğ±Ğ¾ Ğ·Ğ° Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñƒ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸ Ğ½Ğ° FOHOW Interactive Board!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸:

ğŸ’ Ğ¢Ğ°Ñ€Ğ¸Ñ„: Premium
ğŸ’° Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ: 990 RUB
ğŸ“… Ğ”ĞµĞ¹ÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ´Ğ¾: 16.02.2026

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸš€ Ğ’Ğ°ÑˆĞ¸ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸:
âœ… Ğ‘ĞµĞ·Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ½Ğ¾Ğµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ´Ğ¾ÑĞ¾Ğº
âœ… Ğ’ÑĞµ Ğ¿Ñ€ĞµĞ¼Ğ¸ÑƒĞ¼-Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸
âœ… ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°

[ğŸš€ ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñƒ]
```

---

#### Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½ 4: `getSubscriptionCancelledMessage(userName, planName, expiresDate, pricingUrl)`

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ¾Ğ± Ğ¾Ñ‚Ğ¼ĞµĞ½Ğµ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸

**Ğ’Ğ½ĞµÑˆĞ½Ğ¸Ğ¹ Ğ²Ğ¸Ğ´:**
```
âš ï¸ ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° Ğ¾Ñ‚Ğ¼ĞµĞ½ĞµĞ½Ğ°

Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ, Ğ˜Ğ²Ğ°Ğ½!

ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° Premium Ğ±Ñ‹Ğ»Ğ° Ğ¾Ñ‚Ğ¼ĞµĞ½ĞµĞ½Ğ°. Ğ’Ñ‹ Ğ¿ĞµÑ€ĞµĞ²ĞµĞ´ĞµĞ½Ñ‹ Ğ½Ğ° Ğ³Ğ¾ÑÑ‚ĞµĞ²Ğ¾Ğ¹ Ñ‚Ğ°Ñ€Ğ¸Ñ„.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â° Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ Ğ´Ğ¾: 20.01.2026

ĞŸĞ¾ÑĞ»Ğµ ÑÑ‚Ğ¾Ğ¹ Ğ´Ğ°Ñ‚Ñ‹ Ğ±ÑƒĞ´ÑƒÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ³Ğ¾ÑÑ‚ĞµĞ²Ğ¾Ğ³Ğ¾ Ñ‚Ğ°Ñ€Ğ¸Ñ„Ğ°.

[ğŸ”„ ĞŸÑ€Ğ¾Ğ´Ğ»Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºÑƒ]
```

---

#### Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½ 5: `getTelegramDisconnectedMessage(userName, profileUrl)`

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ¾Ğ± Ğ¾Ñ‚ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğ¸ Telegram-ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹

**Ğ’Ğ½ĞµÑˆĞ½Ğ¸Ğ¹ Ğ²Ğ¸Ğ´:**
```
ğŸ”• Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ¾Ñ‚ĞºĞ»ÑÑ‡ĞµĞ½Ñ‹

Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ, Ğ˜Ğ²Ğ°Ğ½!

Ğ’Ñ‹ Ğ¾Ñ‚ĞºĞ»ÑÑ‡Ğ¸Ğ»Ğ¸ Ğ²Ğ°Ğ¶Ğ½Ñ‹Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ ÑĞ²Ğ¾ĞµĞ³Ğ¾ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ°...

âš ï¸ Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ğ²Ñ‹ Ğ½Ğµ Ğ±ÑƒĞ´ĞµÑ‚Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°Ñ‚ÑŒ:
â€¢ ĞĞ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ Ğ¾ ÑÑ€Ğ¾ĞºĞ°Ñ… Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸
â€¢ Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ¾ Ğ¿Ñ€Ğ¾Ğ´Ğ»ĞµĞ½Ğ¸Ğ¸ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸
â€¢ Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ± Ğ¸ÑÑ‚ĞµÑ‡ĞµĞ½Ğ¸Ğ¸ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸
â€¢ Ğ’Ğ°Ğ¶Ğ½Ñ‹Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¸ Ğ½Ğ¾Ğ²Ğ¾ÑÑ‚Ğ¸

[âš™ï¸ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ñ] [ğŸ“¢ ĞšĞ°Ğ½Ğ°Ğ» Ğ¿Ğ¾ Ğ¼Ğ°Ñ€ĞºĞµÑ‚Ğ¸Ğ½Ğ³Ñƒ]
```

---

#### Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¸ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ´Ğ»Ñ ÑĞºĞ»Ğ¾Ğ½ĞµĞ½Ğ¸Ñ ÑĞ»Ğ¾Ğ²Ğ° "Ğ´ĞµĞ½ÑŒ":**
```javascript
function getDaysWord(days) {
  // Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚: "Ğ´ĞµĞ½ÑŒ", "Ğ´Ğ½Ñ" Ğ¸Ğ»Ğ¸ "Ğ´Ğ½ĞµĞ¹" Ğ² Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¾Ñ‚ Ñ‡Ğ¸ÑĞ»Ğ°
  // 1 Ğ´ĞµĞ½ÑŒ, 2 Ğ´Ğ½Ñ, 5 Ğ´Ğ½ĞµĞ¹, 21 Ğ´ĞµĞ½ÑŒ, 23 Ğ´Ğ½Ñ, 25 Ğ´Ğ½ĞµĞ¹...
}
```

---

### 5. â° `/api/cron/tasks.js` - ĞĞ’Ğ¢ĞĞœĞĞ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ• Ğ—ĞĞ”ĞĞ§Ğ˜

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞšÑ€Ğ¾Ğ½-Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹

#### Ğ¢Ğ¸Ğ¿Ñ‹ Ğ·Ğ°Ğ´Ğ°Ñ‡:

1. **ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¸ÑÑ‚ĞµÑ‡ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞ¾Ğº**
   - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, Ğ² 10:00 UTC)
   - ĞĞ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹, Ñ‡ÑŒĞ¸ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸ Ğ¸ÑÑ‚ĞµĞºĞ°ÑÑ‚ Ñ‡ĞµÑ€ĞµĞ· 3 Ğ´Ğ½Ñ
   - ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ `getSubscriptionExpiringMessage()`

2. **ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹ Ğ¾Ğ± Ğ¸ÑÑ‚ĞµÑ‡ĞµĞ½Ğ¸Ğ¸**
   - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ ĞµĞ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ğ¾
   - ĞĞ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹, Ñ‡ÑŒĞ¸ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸ Ğ¸ÑÑ‚ĞµĞºĞ»Ğ¸ ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ
   - ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ `getSubscriptionExpiredMessage()`

3. **ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° Ğ¸ÑÑ‚ĞµĞºÑˆĞ¸Ñ… ĞºĞ¾Ğ´Ğ¾Ğ² Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸**
   - Ğ£Ğ´Ğ°Ğ»ÑĞµÑ‚ ĞºĞ¾Ğ´Ñ‹ Ğ¸Ğ· `telegram_link_codes` ÑÑ‚Ğ°Ñ€ÑˆĞµ 1 Ñ‡Ğ°ÑĞ°
   - ĞŸÑ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ½Ğ°ĞºĞ¾Ğ¿Ğ»ĞµĞ½Ğ¸Ğµ Ğ¼ÑƒÑĞ¾Ñ€Ğ° Ğ² Ğ‘Ğ”

#### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ ĞºÑ€Ğ¾Ğ½-Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ğ² cron/tasks.js:

```javascript
import cron from 'node-cron';
import { sendTelegramMessage } from '../utils/telegramService.js';
import { getSubscriptionExpiringMessage } from '../templates/telegramTemplates.js';

// ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ² 10:00 UTC
cron.schedule('0 10 * * *', async () => {
  console.log('ğŸ”” ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¸ÑÑ‚ĞµÑ‡ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞ¾Ğº...');
  
  // Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ: Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹, Ñ‡ÑŒÑ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° Ğ¸ÑÑ‚ĞµĞºĞ°ĞµÑ‚ Ñ‡ĞµÑ€ĞµĞ· 3 Ğ´Ğ½Ñ
  const users = await pool.query(`
    SELECT id, full_name, telegram_chat_id, subscription_expires_at
    FROM users
    WHERE telegram_chat_id IS NOT NULL
    AND subscription_expires_at BETWEEN NOW() AND NOW() + INTERVAL '3 days'
  `);
  
  for (const user of users.rows) {
    try {
      const daysLeft = Math.ceil(
        (new Date(user.subscription_expires_at) - new Date()) / (1000 * 60 * 60 * 24)
      );
      
      const msg = getSubscriptionExpiringMessage(
        user.full_name,
        daysLeft,
        formatDate(user.subscription_expires_at)
      );
      
      await sendTelegramMessage(
        user.telegram_chat_id,
        msg.text,
        { parse_mode: msg.parse_mode, reply_markup: msg.reply_markup }
      );
      
      console.log(`âœ… ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ: ${user.full_name}`);
    } catch (error) {
      console.error(`âŒ ĞÑˆĞ¸Ğ±ĞºĞ° Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ ${user.id}:`, error);
    }
  }
});
```

---

## ğŸ”— API Endpoints - ĞŸĞ¾Ğ»Ğ½Ğ°Ñ ÑĞ¿Ñ€Ğ°Ğ²ĞºĞ°

### Ğ¡Ğ²Ğ¾Ğ´Ğ½Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°

| ĞœĞµÑ‚Ğ¾Ğ´ | Endpoint | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | Auth | Response |
|-------|----------|---------|------|----------|
| POST | `/api/user/telegram/generate-code` | Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ´Ğ° | JWT âœ… | `{code, expiresAt, botUsername}` |
| GET | `/api/user/telegram/check-link-status` | Polling ÑÑ‚Ğ°Ñ‚ÑƒÑ | JWT âœ… | `{linked, telegram}` |
| POST | `/api/user/connect-telegram` | ĞŸÑ€Ğ¸Ğ²ÑĞ·ĞºĞ° Telegram | JWT âœ… | `{success, message, telegram}` |
| POST | `/api/user/telegram/unlink` | ĞÑ‚Ğ²ÑĞ·ĞºĞ° Telegram | JWT âœ… | `{success, message}` |

### ĞŸĞ¾Ğ»Ğ½Ñ‹Ğµ URL Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ (Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾)

```bash
# 1. Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ´Ğ°
curl -X POST http://localhost:4000/api/user/telegram/generate-code \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json"

# 2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° (polling)
curl -X GET http://localhost:4000/api/user/telegram/check-link-status \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"

# 3. ĞŸÑ€Ğ¸Ğ²ÑĞ·ĞºĞ° Telegram
curl -X POST http://localhost:4000/api/user/connect-telegram \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{\n  \"telegram_chat_id\": \"123456789\",\n  \"telegram_username\": \"john_doe\"\n}'

# 4. ĞÑ‚Ğ²ÑĞ·ĞºĞ° Telegram
curl -X POST http://localhost:4000/api/user/telegram/unlink \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json"
```

---

## ğŸ“ Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ñ‹ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ - ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ ÑĞ¿Ñ€Ğ°Ğ²Ğ¾Ñ‡Ğ½Ğ¸Ğº

### HTML Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Telegram

```html
<!-- Ğ–Ğ¸Ñ€Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚ -->
<b>Ğ–Ğ¸Ñ€Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚</b>

<!-- ĞšÑƒÑ€ÑĞ¸Ğ² -->
<i>ĞšÑƒÑ€ÑĞ¸Ğ²Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚</i>

<!-- ĞŸĞ¾Ğ´Ñ‡ĞµÑ€ĞºĞ¸Ğ²Ğ°Ğ½Ğ¸Ğµ -->
<u>ĞŸĞ¾Ğ´Ñ‡ĞµÑ€ĞºĞ½ÑƒÑ‚Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚</u>

<!-- Ğ—Ğ°Ñ‡ĞµÑ€ĞºĞ¸Ğ²Ğ°Ğ½Ğ¸Ğµ -->
<s>Ğ—Ğ°Ñ‡ĞµÑ€ĞºĞ½ÑƒÑ‚Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚</s>

<!-- ĞšĞ¾Ğ´ (Ğ¼Ğ¾Ğ½Ğ¾ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ½Ñ‹Ğ¹ ÑˆÑ€Ğ¸Ñ„Ñ‚) -->
<code>ĞºĞ¾Ğ´</code>

<!-- Ğ‘Ğ»Ğ¾Ğº ĞºĞ¾Ğ´Ğ° -->
<pre>ĞºĞ¾Ğ´ Ğ½Ğ°\nĞ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑÑ‚Ñ€Ğ¾Ğº</pre>

<!-- Ğ¡ÑÑ‹Ğ»ĞºĞ° -->
<a href="https://example.com">Ğ¢ĞµĞºÑÑ‚ ÑÑÑ‹Ğ»ĞºĞ¸</a>

<!-- ĞŸÑ€ĞµĞ´Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚ -->
<pre><code>ĞºĞ¾Ğ´</code></pre>
```

### Markdown Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

```markdown
*Ğ–Ğ¸Ñ€Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚* Ğ¸Ğ»Ğ¸ **Ğ–Ğ¸Ñ€Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚**
_ĞšÑƒÑ€ÑĞ¸Ğ²_ Ğ¸Ğ»Ğ¸ __ĞšÑƒÑ€ÑĞ¸Ğ²__
~Ğ—Ğ°Ñ‡ĞµÑ€ĞºĞ¸Ğ²Ğ°Ğ½Ğ¸Ğµ~
`ĞºĞ¾Ğ´`
[Ğ¡ÑÑ‹Ğ»ĞºĞ°](https://example.com)
```

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ ĞºĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ½Ğ¾Ğ³Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ

```javascript
const message = `
ğŸ‰ <b>Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ!</b>

Ğ’Ğ¾Ñ‚ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ²Ğ°ÑˆĞ¸Ñ… Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ĞµĞ¹:

<b>ğŸ“‹ Ğ¢Ğ°Ñ€Ğ¸Ñ„ Premium</b>
ğŸ’ Ğ‘ĞµĞ·Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ½Ñ‹Ğµ Ğ´Ğ¾ÑĞºĞ¸
âœ… Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ² PNG
â­ ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°

<i>Ğ”Ğ°Ñ‚Ğ° Ğ¸ÑÑ‚ĞµÑ‡ĞµĞ½Ğ¸Ñ: 20.02.2026</i>

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
<a href="https://example.com">ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñƒ â†’</a>
`.trim();
```

### Emojis Ñ‡Ğ°ÑÑ‚Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ğµ

```
ğŸ’ Premium / ĞŸÑ€ĞµĞ¼Ğ¸ÑƒĞ¼-Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ
âœ… Ğ£ÑĞ¿ĞµÑ… / Ğ“Ğ°Ğ»Ğ¾Ñ‡ĞºĞ°
âŒ ĞÑˆĞ¸Ğ±ĞºĞ° / ĞÑ‚Ğ¼ĞµĞ½Ğ°
â° Ğ’Ñ€ĞµĞ¼Ñ / Ğ”Ğ°Ñ‚Ğ°
ğŸ“… ĞšĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€ÑŒ / Ğ”Ğ°Ñ‚Ğ°
ğŸ“‹ Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ / Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ
ğŸ“¦ ĞŸĞ°ĞºĞµÑ‚ / ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ°
ğŸ’° Ğ”ĞµĞ½ÑŒĞ³Ğ¸ / ĞŸĞ»Ğ°Ñ‚Ñ‘Ğ¶
ğŸš€ ĞĞ°Ñ‡Ğ°Ğ»Ğ¾ / Ğ—Ğ°Ğ¿ÑƒÑĞº
ğŸ”” Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ / Ğ—Ğ²Ğ¾Ğ½Ğ¾Ğº
âš ï¸ Ğ’Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ / ĞŸÑ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğµ
ğŸš¨ Ğ¡Ñ€Ğ¾Ñ‡Ğ½Ğ¾ / Ğ­ĞºÑÑ‚Ñ€ĞµĞ½Ğ½Ğ¾
ğŸ”• ĞÑ‚ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾ / ĞœĞ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ğµ
â“ Ğ’Ğ¾Ğ¿Ñ€Ğ¾Ñ / ĞŸĞ¾Ğ¼Ğ¾Ñ‰ÑŒ
ğŸ’¬ Ğ§Ğ°Ñ‚ / ĞšĞ¾Ğ¼Ğ¼ÑƒĞ½Ğ¸ĞºĞ°Ñ†Ğ¸Ñ
ğŸ“¢ ĞšĞ°Ğ½Ğ°Ğ» / ĞĞ±ÑŠÑĞ²Ğ»ĞµĞ½Ğ¸Ğµ
ğŸ ĞŸĞ¾Ğ´Ğ°Ñ€Ğ¾Ğº / Ğ¡ÑÑ€Ğ¿Ñ€Ğ¸Ğ·
ğŸ” Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ / ĞŸÑ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ğ¾
âš™ï¸ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ / ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³
ğŸŒ Ğ’ĞµĞ± / Ğ˜Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚
ğŸ”— Ğ¡ÑÑ‹Ğ»ĞºĞ°
```

---

## ğŸ’» ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 1: ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ¾Ğ± Ğ°ĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸

```javascript
// Ğ’ Ñ„Ğ°Ğ¹Ğ»Ğµ services/subscriptionService.js

import { sendTelegramMessage } from '../utils/telegramService.js';
import { getSubscriptionActivatedMessage } from '../templates/telegramTemplates.js';

export async function notifySubscriptionActivated(userId, planName, amount) {
  // 1. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¸Ğ· Ğ‘Ğ”
  const result = await pool.query(
    'SELECT full_name, telegram_chat_id, subscription_expires_at FROM users WHERE id = $1',
    [userId]
  );
  
  if (result.rows.length === 0) return;
  
  const user = result.rows[0];
  
  // 2. Ğ•ÑĞ»Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ» Telegram
  if (!user.telegram_chat_id) {
    console.log('â„¹ï¸ ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğµ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ» Telegram');
    return;
  }
  
  // 3. Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµĞ¼ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ
  const msg = getSubscriptionActivatedMessage(
    user.full_name,
    planName,
    amount,
    'RUB',
    formatDate(user.subscription_expires_at)  // DD.MM.YYYY
  );
  
  // 4. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼
  try {
    await sendTelegramMessage(
      user.telegram_chat_id,
      msg.text,
      {
        parse_mode: msg.parse_mode,
        disable_web_page_preview: true,
        reply_markup: msg.reply_markup
      }
    );
    console.log(`âœ… Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ¾Ğ± Ğ°ĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾: ${user.full_name}`);
  } catch (error) {
    console.error('âŒ ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ:', error.message);
  }
}

// Ğ’Ñ‹Ğ·Ğ¾Ğ²:
await notifySubscriptionActivated(userId, 'Premium', 990);
```

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 2: Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ñ‚Ğ¸Ğ¿ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ

```javascript
// Ğ’ Ñ„Ğ°Ğ¹Ğ»Ğµ api/templates/telegramTemplates.js

/**
 * Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ¾ Ğ½Ğ¾Ğ²Ğ¾Ğ¼ Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ğµ
 */
function getNewMaterialNotification(userName, materialTitle, materialUrl) {
  const text = `
ğŸ“š <b>ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»!</b>

Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ, ${userName}!

Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»:
<b>${materialTitle}</b>

ĞŸĞµÑ€ĞµĞ¹Ñ‚Ğ¸ Ğº Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ñƒ â†’
  `.trim();
  
  return {
    text,
    parse_mode: 'HTML',
    disable_web_page_preview: true,
    reply_markup: {
      inline_keyboard: [
        [{ text: 'ğŸ“– ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ', url: materialUrl }]
      ]
    }
  };
}

export { getNewMaterialNotification };
```

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 3: ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ°Ğ¼Ğ¸

```javascript
import { sendTelegramMessageWithButtons } from '../utils/telegramService.js';

// ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ°Ğ¼Ğ¸
await sendTelegramMessageWithButtons(
  chatId,
  'Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ:',
  [
    [
      { text: 'âœ… ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ', callback_data: 'confirm_123' },
      { text: 'âŒ ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ', callback_data: 'cancel_123' }
    ],
    [
      { text: 'â“ Ğ£Ğ·Ğ½Ğ°Ñ‚ÑŒ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ', url: 'https://example.com' }
    ]
  ],
  { parse_mode: 'HTML' }
);
```

---

## ğŸ”‘ ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ

### Ğ¤Ğ°Ğ¹Ğ»: `.env`

```env
# ============ TELEGRAM ============

# ĞĞ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾!
# ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñƒ @BotFather Ğ² Telegram
TELEGRAM_BOT_TOKEN=8508930461:AAE-eoYVEdIrABoXhlfK-s0ujkBW_xdgZ9Y

# ĞĞ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾!
# Username Ğ±Ğ¾Ñ‚Ğ° (Ğ´Ğ»Ñ ÑÑÑ‹Ğ»Ğ¾Ğº Ğ² ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸ÑÑ…)
TELEGRAM_BOT_USERNAME=fohow_bot

# ĞĞ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾
# ID Ñ‡Ğ°Ñ‚Ğ° Ğ´Ğ»Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ñ… ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ°
TELEGRAM_ADMIN_CHAT_ID=300732358

# ============ Ğ”Ğ Ğ£Ğ“ĞĞ• ============

DATABASE_URL=postgresql://user:pass@localhost:5432/fohow
JWT_SECRET=your-secret-key
FRONTEND_URL=https://interactive.marketingfohow.ru
NODE_ENV=production
```

### ĞšĞ°Ğº Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ TELEGRAM_BOT_TOKEN

1. ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ Telegram
2. ĞĞ°Ğ¹Ğ´Ğ¸Ñ‚Ğµ @BotFather
3. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñƒ `/newbot`
4. Ğ”Ğ°Ğ¹Ñ‚Ğµ Ğ±Ğ¾Ñ‚Ñƒ Ğ¸Ğ¼Ñ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, "FOHOW Bot")
5. Ğ”Ğ°Ğ¹Ñ‚Ğµ Ğ±Ğ¾Ñ‚Ñƒ username (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, "fohow_bot")
6. @BotFather Ğ²ĞµÑ€Ğ½Ñ‘Ñ‚ Ğ²Ğ°Ğ¼ Ñ‚Ğ¾ĞºĞµĞ½
7. ĞšĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ğ² `.env` ĞºĞ°Ğº `TELEGRAM_BOT_TOKEN=...`

### ĞšĞ°Ğº Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ TELEGRAM_CHAT_ID

1. ĞĞ°Ñ‡Ğ½Ğ¸Ñ‚Ğµ Ñ‡Ğ°Ñ‚ Ñ Ğ±Ğ¾Ñ‚Ğ¾Ğ¼
2. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ Ğ»ÑĞ±Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ
3. ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ: https://api.telegram.org/botĞ¢ĞĞšĞ•Ğ/getUpdates
4. ĞĞ°Ğ¹Ğ´Ğ¸Ñ‚Ğµ ÑĞ²Ğ¾Ğ¹ `message.chat.id`
5. Ğ­Ñ‚Ğ¾ Ğ²Ğ°Ñˆ TELEGRAM_ADMIN_CHAT_ID

---

## ğŸ”„ ĞŸÑ€Ğ¾Ñ†ĞµÑÑ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ°

### ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ­Ğ¢ĞĞŸ 1: ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¬ ĞĞ Ğ¡ĞĞ™Ğ¢Ğ•                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ·Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ² "ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ â†’ Telegram"
2. Ğ’Ğ¸Ğ´Ğ¸Ñ‚ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ "ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Telegram"
3. ĞĞ°Ğ¶Ğ¸Ğ¼Ğ°ĞµÑ‚ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ
        â†“
   Ğ¤Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚: POST /api/user/telegram/generate-code
        â†“
4. Ğ‘ÑĞºĞµĞ½Ğ´:
   - Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ ĞºĞ¾Ğ´ "ABC123" (6 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²)
   - Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Ğ² Ğ‘Ğ” telegram_link_codes (expires_at = NOW + 15 Ğ¼Ğ¸Ğ½)
   - Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ ĞºĞ¾Ğ´ Ğ¸ username Ğ±Ğ¾Ñ‚Ğ°
        â†“
5. Ğ¤Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚:
   - Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ: "Ğ’Ğ°Ñˆ ĞºĞ¾Ğ´: ABC123 (Ğ´ĞµĞ¹ÑÑ‚Ğ²ÑƒĞµÑ‚ 15 Ğ¼Ğ¸Ğ½ÑƒÑ‚)"
   - ĞšĞ½Ğ¾Ğ¿ĞºĞ° "ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ"
   - Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ: "ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ Ğ±Ğ¾Ñ‚Ñƒ: /start ABC123"
   - Ğ¡ÑÑ‹Ğ»ĞºĞ° Ğ½Ğ° Ğ±Ğ¾Ñ‚Ğ°: https://t.me/fohow_bot
        â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ­Ğ¢ĞĞŸ 2: ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¬ Ğ’ TELEGRAM                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ Telegram
2. ĞĞ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ±Ğ¾Ñ‚Ğ° @fohow_bot (Ğ¸Ğ»Ğ¸ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ¿Ğ¾ ÑÑÑ‹Ğ»ĞºĞµ)
3. ĞĞ°Ğ¶Ğ¸Ğ¼Ğ°ĞµÑ‚ "ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ" Ğ¸Ğ»Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ "/start"
        â†“
   Ğ‘Ğ¾Ñ‚ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ /start (Ğ±ĞµĞ· ĞºĞ¾Ğ´Ğ°)
        â†“
4. Ğ‘Ğ¾Ñ‚ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚:
   - ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ
   - Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ğ¸ Ğ¿Ğ¾ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞµ
   - Ğ¡ÑÑ‹Ğ»ĞºÑƒ Ğ½Ğ° ÑĞ°Ğ¹Ñ‚
        â†“
5. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞµÑ‚ ĞºĞ¾Ğ´ ÑĞ¾ ÑĞ²Ğ¾ĞµĞ³Ğ¾ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ñ Ğ½Ğ° ÑĞ°Ğ¹Ñ‚Ğµ
6. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ±Ğ¾Ñ‚Ñƒ: "/start ABC123"
        â†“
   Ğ‘Ğ¾Ñ‚ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚: /start ABC123
        â†“
7. Ğ‘Ğ¾Ñ‚ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ handleLinkCode():
   â”œâ”€ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚: ĞµÑÑ‚ÑŒ Ğ»Ğ¸ ĞºĞ¾Ğ´ Ğ² telegram_link_codes?
   â”‚  â””â”€ âŒ ĞĞµÑ‚ â†’ ĞÑˆĞ¸Ğ±ĞºĞ°: "ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´"
   â”‚  â””â”€ âœ… Ğ”Ğ° â†’ ĞŸÑ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ°ĞµĞ¼
   â”‚
   â”œâ”€ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚: code.used = false?
   â”‚  â””â”€ âŒ ĞĞµÑ‚ â†’ ĞÑˆĞ¸Ğ±ĞºĞ°: "ĞšĞ¾Ğ´ ÑƒĞ¶Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½"
   â”‚  â””â”€ âœ… Ğ”Ğ° â†’ ĞŸÑ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ°ĞµĞ¼
   â”‚
   â”œâ”€ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚: expires_at > NOW?
   â”‚  â””â”€ âŒ ĞĞµÑ‚ â†’ ĞÑˆĞ¸Ğ±ĞºĞ°: "ĞšĞ¾Ğ´ Ğ¸ÑÑ‚Ñ‘Ğº"
   â”‚  â””â”€ âœ… Ğ”Ğ° â†’ ĞŸÑ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ°ĞµĞ¼
   â”‚
   â”œâ”€ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚: ĞµÑÑ‚ÑŒ Ğ»Ğ¸ telegram_chat_id Ñƒ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ?
   â”‚  â””â”€ âŒ Ğ”Ğ° â†’ ĞÑˆĞ¸Ğ±ĞºĞ°: "ĞĞºĞºĞ°ÑƒĞ½Ñ‚ ÑƒĞ¶Ğµ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½"
   â”‚  â””â”€ âœ… ĞĞµÑ‚ â†’ ĞŸÑ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ°ĞµĞ¼
   â”‚
   â””â”€ âœ… Ğ’Ğ¡Ğ• ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ˜ ĞŸĞ ĞĞ™Ğ”Ğ•ĞĞ«!
        â†“
8. Ğ‘Ğ¾Ñ‚ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ API: POST /api/user/connect-telegram
   - ĞŸĞµÑ€ĞµĞ´Ğ°Ñ‘Ñ‚: telegram_chat_id, telegram_username
        â†“
9. Ğ‘ÑĞºĞµĞ½Ğ´ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ Ğ‘Ğ”:
   - users.telegram_chat_id = "123456789"
   - users.telegram_user = "@john_doe"
   - users.updated_at = NOW
   - telegram_link_codes.used = true
        â†“
10. Ğ‘Ğ¾Ñ‚ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ:
    "âœ… Ğ£ÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½Ğ¾! Ğ’Ñ‹ Ğ±ÑƒĞ´ĞµÑ‚Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°Ñ‚ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ¾ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞµ"
        â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ­Ğ¢ĞĞŸ 3: Ğ¡Ğ˜ĞĞ¥Ğ ĞĞĞ˜Ğ—ĞĞ¦Ğ˜Ğ¯ ĞĞ Ğ¡ĞĞ™Ğ¢Ğ• (POLLING)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Ğ¤Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´ Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµÑ‚ polling ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 2 ÑĞµĞºÑƒĞ½Ğ´Ñ‹:
   GET /api/user/telegram/check-link-status
        â†“
2. Ğ‘ÑĞºĞµĞ½Ğ´ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚: users.telegram_chat_id IS NOT NULL?
   - âŒ ĞĞµÑ‚ â†’ {linked: false}
   - âœ… Ğ”Ğ° â†’ {linked: true, telegram: {...}}
        â†“
3. Ğ¤Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚: {linked: true}
   - ĞÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµÑ‚ polling
   - ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚: "âœ… ĞŸÑ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½Ğ¾ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾!"
   - ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ UI (Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ @username, ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ¾Ñ‚Ğ²ÑĞ·ĞºĞ¸)
        â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ­Ğ¢ĞĞŸ 4: Ğ“ĞĞ¢ĞĞ’Ğ!                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ±ÑƒĞ´ĞµÑ‚ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°Ñ‚ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ:
âœ… Ğ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞµ
âœ… Ğ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ°Ñ…
âœ… Ğ Ğ¿Ñ€Ğ¾Ğ´Ğ»ĞµĞ½Ğ¸Ğ¸
âœ… Ğ Ğ¸ÑÑ‚ĞµÑ‡ĞµĞ½Ğ¸Ğ¸
âœ… ĞĞ± Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸ÑÑ…
```

### Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (ĞŸÑ€Ğ¸ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞµ)

```
BEFORE (Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: ĞĞµ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ users                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id         â”‚ 1                       â”‚
â”‚ email      â”‚ john@example.com        â”‚
â”‚ full_name  â”‚ Ğ˜Ğ²Ğ°Ğ½ ĞŸĞµÑ‚Ñ€Ğ¾Ğ²           â”‚
â”‚ telegram_chat_id  â”‚ NULL             â”‚
â”‚ telegram_user     â”‚ NULL             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ telegram_link_codes                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id         â”‚ 1                       â”‚
â”‚ user_id    â”‚ 1                       â”‚
â”‚ code       â”‚ ABC123                  â”‚
â”‚ expires_at â”‚ 2026-01-16 14:24:00    â”‚
â”‚ used       â”‚ false                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

         â†“ ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ /start ABC123 â†“

AFTER (Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: ĞŸÑ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ users                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id         â”‚ 1                       â”‚
â”‚ email      â”‚ john@example.com        â”‚
â”‚ full_name  â”‚ Ğ˜Ğ²Ğ°Ğ½ ĞŸĞµÑ‚Ñ€Ğ¾Ğ²           â”‚
â”‚ telegram_chat_id  â”‚ "123456789"      â”‚ â† ĞĞ‘ĞĞĞ’Ğ›Ğ•ĞĞ!
â”‚ telegram_user     â”‚ "john_doe"       â”‚ â† ĞĞ‘ĞĞĞ’Ğ›Ğ•ĞĞ!
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ telegram_link_codes                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id         â”‚ 1                       â”‚
â”‚ user_id    â”‚ 1                       â”‚
â”‚ code       â”‚ ABC123                  â”‚
â”‚ expires_at â”‚ 2026-01-16 14:24:00    â”‚
â”‚ used       â”‚ true                    â”‚ â† ĞĞ¢ĞœĞ•Ğ§Ğ•ĞĞ!
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ĞÑ‚Ğ»Ğ°Ğ´ĞºĞ° Ğ¸ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### Ğ“Ğ´Ğµ Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ»Ğ¾Ğ³Ğ¸

**ĞĞ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ:**
```bash
# ĞĞ±Ñ‰Ğ¸Ğµ Ğ»Ğ¾Ğ³Ğ¸ Node.js
tail -f /var/www/FOHOW-proekt-v3/server.log

# Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ Telegram
tail -f /var/www/FOHOW-proekt-v3/server.log | grep -i telegram

# Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸
tail -f /var/www/FOHOW-proekt-v3/server.log | grep "âŒ"

# Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ ÑƒÑĞ¿ĞµÑ…Ğ¸
tail -f /var/www/FOHOW-proekt-v3/server.log | grep "âœ…"
```

### Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

**Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ±Ğ¾Ñ‚Ğ°:**
```
âœ… Telegram Ğ±Ğ¾Ñ‚ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½ Ğ¸ Ğ³Ğ¾Ñ‚Ğ¾Ğ² Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ
```

**Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ´Ğ°:**
```
âœ… ĞšĞ¾Ğ´ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸ Telegram ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½: Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ ID=1, ĞºĞ¾Ğ´=ABC123
```

**ĞŸĞ¾Ğ¿Ñ‹Ñ‚ĞºĞ° Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸:**
```
ğŸ”— ĞŸĞ¾Ğ¿Ñ‹Ñ‚ĞºĞ° Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ°: chatId=123456789, ĞºĞ¾Ğ´=ABC123
```

**Ğ£ÑĞ¿ĞµÑˆĞ½Ğ°Ñ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ°:**
```
âœ… Telegram Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½: Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ john@example.com, chatId=123456789
```

**ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ:**
```
ğŸ“± ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Telegram ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ² Ñ‡Ğ°Ñ‚: 123456789
   Ğ¢ĞµĞºÑÑ‚: ğŸ‰ ĞŸÑ€Ğ¸Ğ²ĞµÑ‚! Ğ­Ñ‚Ğ¾ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ğ¾Ğµ...
âœ… Telegram ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾
   Message ID: 12345
   Ğ§Ğ°Ñ‚ ID: 123456789
   Ğ’Ñ€ĞµĞ¼Ñ: 2026-01-16T14:09:45.123Z
```

**ĞÑˆĞ¸Ğ±ĞºĞ¸ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸:**
```
âŒ ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´
âŒ ĞšĞ¾Ğ´ ÑƒĞ¶Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½
â° ĞšĞ¾Ğ´ Ğ¸ÑÑ‚Ñ‘Ğº
âš ï¸ ĞĞºĞºĞ°ÑƒĞ½Ñ‚ ÑƒĞ¶Ğµ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½
```

### Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ API endpoints

```bash
# 1. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ JWT Ñ‚Ğ¾ĞºĞµĞ½ (Ğ·Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚Ğµ Ğ½Ğ° Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹)
JWT_TOKEN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

# 2. Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ´
curl -X POST http://localhost:4000/api/user/telegram/generate-code \
  -H "Authorization: Bearer $JWT_TOKEN" \
  -H "Content-Type: application/json" | jq .

# 3. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ
curl -X GET http://localhost:4000/api/user/telegram/check-link-status \
  -H "Authorization: Bearer $JWT_TOKEN" | jq .

# 4. ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Telegram (Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ)
curl -X POST http://localhost:4000/api/user/connect-telegram \
  -H "Authorization: Bearer $JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"telegram_chat_id":"123456789","telegram_username":"john_doe"}' | jq .

# 5. ĞÑ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Telegram
curl -X POST http://localhost:4000/api/user/telegram/unlink \
  -H "Authorization: Bearer $JWT_TOKEN" \
  -H "Content-Type: application/json" | jq .
```

### ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° Ğ±Ğ¾Ñ‚Ğ°

```bash
# SSH Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€
ssh root@beget.com

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ĞµÑÑ‚ÑŒ Ğ»Ğ¸ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ Node.js
ps aux | grep node

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ñ€Ñ‚ 4000
netstat -tuln | grep 4000

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸ (Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ 50 ÑÑ‚Ñ€Ğ¾Ğº)
tail -50 /var/www/FOHOW-proekt-v3/server.log

# ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ±Ğ¾Ñ‚ (ĞµÑĞ»Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ PM2)
pm2 restart fohow-api

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ PM2
pm2 status
```

### Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Telegram

```
ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ Ğ±Ğ¾Ñ‚Ñƒ @fohow_bot ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹:
- /start                    â†’ ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ Ğ¿Ñ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğµ
- /start INVALID            â†’ ĞÑˆĞ¸Ğ±ĞºĞ° "ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´"
- /start ABC123             â†’ ĞŸĞ¾Ğ¿Ñ‹Ñ‚Ğ°ĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ñ‚ÑŒ (ĞµÑĞ»Ğ¸ ĞºĞ¾Ğ´ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ½Ñ‹Ğ¹)
```

---

## ğŸ“ Ğ•ÑĞ»Ğ¸ Ñ‡Ñ‚Ğ¾-Ñ‚Ğ¾ Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚

### Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 1: Ğ‘Ğ¾Ñ‚ Ğ½Ğµ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ÑÑ

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³
cat /var/www/FOHOW-proekt-v3/.env | grep TELEGRAM_BOT_TOKEN

# Ğ•ÑĞ»Ğ¸ Ğ¿ÑƒÑÑ‚Ğ¾ â†’ Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ñ‚Ğ¾ĞºĞµĞ½
echo "TELEGRAM_BOT_TOKEN=YOUR_TOKEN" >> .env

# ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ ÑĞµÑ€Ğ²ĞµÑ€
pm2 restart fohow-api

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ»Ğ¾Ğ³Ğ¸
tail -20 /var/www/FOHOW-proekt-v3/server.log | grep -i telegram
```

### Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 2: ĞšĞ¾Ğ´Ñ‹ Ğ½Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑÑ‚ÑÑ

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ‘Ğ”
psql -h your-db-host -U db_user -d fohow_db

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñƒ
SELECT * FROM telegram_link_codes LIMIT 5;

# Ğ•ÑĞ»Ğ¸ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ½Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚ â†’ ÑĞ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ
CREATE TABLE telegram_link_codes (
    id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    code VARCHAR(10) UNIQUE NOT NULL,
    expires_at TIMESTAMP NOT NULL,
    used BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 3: Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ½Ğµ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑÑ‚ÑÑ

```javascript
// Ğ’ ĞºĞ¾Ğ´Ğµ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ:
import { checkBotConnection } from '../utils/telegramService.js';

const status = await checkBotConnection();
console.log('Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ±Ğ¾Ñ‚Ğ°:', status);

// ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ
import { sendTestMessage } from '../utils/telegramService.js';
await sendTestMessage("Ğ’ĞĞ¨_CHAT_ID");
```

---

## ğŸ“ Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ

### ĞŸĞ¾Ğ»ĞµĞ·Ğ½Ñ‹Ğµ ÑÑÑ‹Ğ»ĞºĞ¸

- **Telegram Bot API:** https://core.telegram.org/bots/api
- **node-telegram-bot-api:**https://github.com/yagop/node-telegram-bot-api
- **Fastify Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ:** https://www.fastify.io
- **PostgreSQL:** https://www.postgresql.org/docs

### Ğ’ĞµÑ€ÑĞ¸Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ñ… Ğ¿Ğ°ĞºĞµÑ‚Ğ¾Ğ²

```json
{
  "node-telegram-bot-api": "^0.60.0",
  "fastify": "^4.0.0",
  "pg": "^8.0.0"
}
```

### Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

**v1.0 (Ñ‚ĞµĞºÑƒÑ‰Ğ°Ñ):**
- âœ… ĞŸÑ€Ğ¸Ğ²ÑĞ·ĞºĞ° Telegram Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ°
- âœ… Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° ĞºĞ¾Ğ´Ğ¾Ğ² Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ½Ğ¾ÑÑ‚Ğ¸ (15 Ğ¼Ğ¸Ğ½ TTL)
- âœ… ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ
- âœ… 7+ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¾Ğ² ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹
- âœ… API endpoints
- âœ… ĞšÑ€Ğ¾Ğ½-Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸

---

## ğŸ“§ ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹ Ğ¸ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°

Ğ•ÑĞ»Ğ¸ Ğ²Ğ¾Ğ·Ğ½Ğ¸ĞºĞ°ÑÑ‚ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ¿Ğ¾ Telegram-Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸:

- **ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ² Telegram:** @FOHOWadmin
- **GitHub Issues:** github.com/sergeyxmao/FOHOW-proekt-v3/issues
- **Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ:** docs/TELEGRAM_INTEGRATION.md

---

**Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ°ĞºÑ‚ÑƒĞ°Ğ»ĞµĞ½ Ğ½Ğ°:** 16 ÑĞ½Ğ²Ğ°Ñ€Ñ 2026 Ğ³Ğ¾Ğ´Ğ°  
**Ğ’ĞµÑ€ÑĞ¸Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸:** 1.0  
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹:** âœ… Production  

---

*Ğ¡Ğ¿Ğ°ÑĞ¸Ğ±Ğ¾ Ğ·Ğ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ FOHOW Interactive Board!* ğŸ¨
