# üì± Telegram Integration Documentation

## üéØ –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ Telegram-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ FOHOW Interactive Board –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- **–ü—Ä–∏–≤—è–∑–∞—Ç—å** –ª–∏—á–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç Telegram –∫ –ø—Ä–æ—Ñ–∏–ª—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ü–æ–ª—É—á–∞—Ç—å** —Å–∏—Å—Ç–µ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–∞—Ö, –ø–ª–∞—Ç–µ–∂–∞—Ö –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö
- **–£–ø—Ä–∞–≤–ª—è—Ç—å** –ø—Ä–æ—Ñ–∏–ª–µ–º —á–µ—Ä–µ–∑ Telegram –∫–æ–º–∞–Ω–¥—ã

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### –ë—ç–∫–µ–Ω–¥ (`/api`)

```
api/
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îî‚îÄ‚îÄ telegramBot.js              # –û—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥, –ø—Ä–∏–≤—è–∑–∫–∞)
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îî‚îÄ‚îÄ telegram.js                 # API endpoints –¥–ª—è Telegram
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îî‚îÄ‚îÄ telegramService.js          # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îî‚îÄ‚îÄ telegramTemplates.js        # –®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π
‚îú‚îÄ‚îÄ cron/
‚îÇ   ‚îî‚îÄ‚îÄ tasks.js                    # –ö—Ä–æ–Ω-–∑–∞–¥–∞—á–∏ (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
‚îî‚îÄ‚îÄ server.js                       # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
```

### –§—Ä–æ–Ω—Ç–µ–Ω–¥ (`/src`)

```
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ TelegramLinkWidget.vue       # UI –≤–∏–¥–∂–µ—Ç –ø—Ä–∏–≤—è–∑–∫–∏ Telegram
‚îÇ   ‚îú‚îÄ‚îÄ UserProfile.vue             # –ü–æ–ª–µ telegram_user –≤ –ø—Ä–æ—Ñ–∏–ª–µ
‚îÇ   ‚îî‚îÄ‚îÄ PartnersPanel.vue           # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ telegram_user –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ composables/
‚îÇ   ‚îú‚îÄ‚îÄ useProjectActions.js        # Share to Telegram
‚îÇ   ‚îú‚îÄ‚îÄ useUserSocial.js            # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ telegram_user
‚îÇ   ‚îî‚îÄ‚îÄ useUserPrivacy.js           # –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å telegram_user
‚îî‚îÄ‚îÄ services/
    ‚îî‚îÄ‚îÄ API calls –¥–ª—è Telegram endpoints
```

## üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. **bot/telegramBot.js** - –û—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç

#### –§—É–Ω–∫—Ü–∏–∏:
- `initializeTelegramBot()` ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞ —Å long polling
- `handleLinkCode()` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã `/start –ö–û–î` –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏
- `sendWelcomeMessage()` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- `getBot()` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä –±–æ—Ç–∞

#### –ö–æ–º–∞–Ω–¥—ã:
- `/start` ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `/start –ö–û–î` ‚Äî –ø—Ä–∏–≤—è–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ (6-—Å–∏–º–≤–æ–ª—å–Ω—ã–π –∫–æ–¥)

#### –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏–≤—è–∑–∫–∏:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–¥ –≤ –ø—Ä–æ—Ñ–∏–ª–µ –Ω–∞ —Å–∞–π—Ç–µ
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –±–æ—Ç: `/start –ö–û–î`
3. –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
   - –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –∫–æ–¥ –≤ `telegram_link_codes`
   - –ö–æ–¥ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω?
   - –ö–æ–¥ –Ω–µ –∏—Å—Ç–µ–∫? (15 –º–∏–Ω—É—Ç)
   - –≠—Ç–æ—Ç Telegram –µ—â–µ –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω?
4. –ï—Å–ª–∏ –≤—Å–µ –û–ö:
   - –û–±–Ω–æ–≤–ª—è–µ—Ç `users.telegram_chat_id`, `users.telegram_user`
   - –ú–∞—Ä–∫–∏—Ä—É–µ—Ç –∫–æ–¥ –∫–∞–∫ `used = true`
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

### 2. **routes/telegram.js** - API endpoints

#### Endpoints:

```
POST /api/user/telegram/generate-code
  - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: —Ç—Ä–µ–±—É–µ—Ç—Å—è JWT —Ç–æ–∫–µ–Ω
  - –û—Ç–≤–µ—Ç: { success, code, expiresAt, botUsername }
  - –î–µ–π—Å—Ç–≤–∏–µ: –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 6-—Å–∏–º–≤–æ–ª—å–Ω—ã–π –∫–æ–¥ (–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 15 –º–∏–Ω—É—Ç)

GET /api/user/telegram/check-link-status
  - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: —Ç—Ä–µ–±—É–µ—Ç—Å—è JWT —Ç–æ–∫–µ–Ω
  - –û—Ç–≤–µ—Ç: { success, linked, telegram: { chat_id, username } }
  - –î–µ–π—Å—Ç–≤–∏–µ: polling –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–∏–≤—è–∑–∫–∏

POST /api/user/connect-telegram
  - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: —Ç—Ä–µ–±—É–µ—Ç—Å—è JWT —Ç–æ–∫–µ–Ω
  - Body: { telegram_chat_id, telegram_username }
  - –î–µ–π—Å—Ç–≤–∏–µ: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–æ—Ç–æ–º –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏

GET /api/user/telegram-status
  - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: —Ç—Ä–µ–±—É–µ—Ç—Å—è JWT —Ç–æ–∫–µ–Ω
  - –û—Ç–≤–µ—Ç: { linked, telegram_user, message }

POST /api/user/telegram/unlink
  - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: —Ç—Ä–µ–±—É–µ—Ç—Å—è JWT —Ç–æ–∫–µ–Ω
  - –î–µ–π—Å—Ç–≤–∏–µ: –æ—Ç–≤—è–∑–∞—Ç—å Telegram –æ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞
```

### 3. **utils/telegramService.js** - –°–ª—É–∂–±–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏

#### –§—É–Ω–∫—Ü–∏–∏:
- `sendTelegramMessage(chatId, message, options)` ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
- `telegramApiRequest(method, data)` ‚Äî –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–π –∑–∞–ø—Ä–æ—Å –∫ Telegram API

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```javascript
import { sendTelegramMessage } from '../utils/telegramService.js';

await sendTelegramMessage(
  chatId,
  '–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ',
  { parse_mode: 'HTML' }
);
```

### 4. **templates/telegramTemplates.js** - –®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π

#### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- `getSubscriptionCancelledMessage()` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç–º–µ–Ω–µ –ø–æ–¥–ø–∏—Å–∫–∏
- `getSubscriptionExpiringMessage()` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏
- `getSubscriptionActivatedMessage()` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏
- `getPaymentSuccessMessage()` ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
- `getPaymentFailedMessage()` ‚Äî –æ—à–∏–±–∫–∞ –ø–ª–∞—Ç–µ–∂–∞
- `getTelegramDisconnectedMessage()` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç–≤—è–∑–∫–µ
- –ò –¥—Ä—É–≥–∏–µ...

### 5. **cron/tasks.js** - –ö—Ä–æ–Ω-–∑–∞–¥–∞—á–∏

–í–∫–ª—é—á–∞—é—Ç:
- –û—Ç–ø—Ä–∞–≤–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–æ–∫
- –û—Ç–ø—Ä–∞–≤–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –ø–ª–∞—Ç–µ–∂–∞—Ö
- –ü—Ä–æ–≤–µ—Ä–∫—É –∏ –æ—á–∏—Å—Ç–∫—É –∏—Å—Ç–µ–∫—à–∏—Ö –∫–æ–¥–æ–≤ –ø—Ä–∏–≤—è–∑–∫–∏

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `users`

–ü–æ–ª—è –¥–ª—è Telegram:
```sql
telegram_chat_id   VARCHAR       -- ID —á–∞—Ç–∞ Telegram (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
telegram_user      VARCHAR       -- Username –≤ Telegram (@username)
telegram_channel   VARCHAR       -- –ö–∞–Ω–∞–ª/–≥—Ä—É–ø–ø–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

### –¢–∞–±–ª–∏—Ü–∞ `telegram_link_codes`

```sql
id              INTEGER PRIMARY KEY
user_id         INTEGER NOT NULL (FOREIGN KEY -> users.id)
code            VARCHAR UNIQUE NOT NULL  -- 6 —Å–∏–º–≤–æ–ª–æ–≤
expires_at      TIMESTAMP NOT NULL       -- 15 –º–∏–Ω—É—Ç –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è
used            BOOLEAN DEFAULT FALSE
created_at      TIMESTAMP DEFAULT NOW()
```

## üîê –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
# Telegram Bot
TELEGRAM_BOT_TOKEN=8508930461:AAE-eoYVEdIrABoXhlfK-s0ujkBW_xdgZ9Y
TELEGRAM_CHAT_ID=300732358  # –î–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
TELEGRAM_BOT_USERNAME=fohow_bot  # Username –±–æ—Ç–∞ (–¥–ª—è —Å—Å—ã–ª–æ–∫)
```

## üé® UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### TelegramLinkWidget.vue

–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–∏–≤—è–∑–∫–∏:
1. –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å Telegram"
2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞
3. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–¥–∞ (—Å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
4. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
5. Polling –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
6. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ (–ø—Ä–∏–≤—è–∑–∞–Ω/–Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω)
7. –ö–Ω–æ–ø–∫–∞ –æ—Ç–≤—è–∑–∫–∏

### UserProfile.vue

- –ü–æ–ª–µ –≤–≤–æ–¥–∞ `telegram_user` (@username)
- –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –ø–æ–ª—è (–≤–∏–¥–∏–º–æ –ª–∏ –∏–º—è –ø—Ä–∏ –ø–æ–∏—Å–∫–µ)

### PartnersPanel.vue

- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ `telegram_user` –ø–∞—Ä—Ç–Ω–µ—Ä–∞
- –°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å –≤ Telegram

## üìà Flow –¥–∏–∞–≥—Ä–∞–º–º–∞

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ —Å–∞–π—Ç–µ
    ‚Üì
[–ù–∞–∂–∏–º–∞–µ—Ç: –ü–æ–¥–∫–ª—é—á–∏—Ç—å Telegram]
    ‚Üì
api/user/telegram/generate-code
    ‚Üì (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ö–û–î)
[–ö–æ–ø–∏—Ä—É–µ—Ç –ö–û–î –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –±–æ—Ç: /start –ö–û–î]
    ‚Üì
bot.onText(/\/start(.*)/) ‚Üí handleLinkCode()
    ‚Üì
[–ü—Ä–æ–≤–µ—Ä–∫–∏: —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –∫–æ–¥, –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω, –Ω–µ –∏—Å—Ç–µ–∫, –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω]
    ‚Üì
api/user/connect-telegram (–≤—ã–∑–æ–≤–µ—Ç—Å—è –∏–∑ –±–æ—Ç–∞)
    ‚Üì
[–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î: telegram_chat_id, telegram_user, marked as used]
    ‚Üì
[–û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤ Telegram]
    ‚Üì
–°–∞–π—Ç (polling) –≤–∏–¥–∏—Ç, —á—Ç–æ –ø—Ä–∏–≤—è–∑–∞–Ω ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ü—Ä–∏–≤—è–∑–∞–Ω–æ"
```

## üîÑ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –¢–∏–ø—ã —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:

1. **–ü—Ä–∏ –ø—Ä–∏–≤—è–∑–∫–µ** - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–∏–≤—è–∑–∫–∏
2. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏** - –∑–∞ 3 –¥–Ω—è –¥–æ –∫–æ–Ω—Ü–∞
3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏** - –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ
4. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—Ç–º–µ–Ω–µ –ø–æ–¥–ø–∏—Å–∫–∏** - –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ
5. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–ª–∞—Ç–µ–∂–µ** - —É—Å–ø–µ—Ö/–æ—à–∏–±–∫–∞
6. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—Ç–≤—è–∑–∫–µ** - –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–≤—è–∑–∞–ª Telegram

–û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∫—Ä–æ–Ω-–∑–∞–¥–∞—á–∞–º–∏ –∏–∑ `/api/cron/tasks.js`

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

### –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:

1. **–°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω** –≤ `templates/telegramTemplates.js`:
```javascript
export function getMyNotificationMessage(data) {
  return `üì¢ <b>–ú–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</b>\n\n–î–∞–Ω–Ω—ã–µ: ${data}`;
}
```

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–¥–µ**:
```javascript
import { sendTelegramMessage } from '../utils/telegramService.js';
import { getMyNotificationMessage } from '../templates/telegramTemplates.js';

const message = getMyNotificationMessage(someData);
await sendTelegramMessage(chatId, message, { parse_mode: 'HTML' });
```

### –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:

```javascript
const userResult = await pool.query(
  'SELECT telegram_chat_id FROM users WHERE id = $1',
  [userId]
);

if (userResult.rows[0]?.telegram_chat_id) {
  const chatId = userResult.rows[0].telegram_chat_id;
  await sendTelegramMessage(
    chatId,
    '–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ',
    { parse_mode: 'HTML' }
  );
}
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏ –±–æ—Ç–∞:
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
tail -f /var/www/FOHOW-proekt-v3/server.log | grep -i telegram
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞:
```bash
# SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å Node.js
ps aux | grep node
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API:
```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞
curl -X POST http://localhost:4000/api/user/telegram/generate-code \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
curl -X GET http://localhost:4000/api/user/telegram/check-link-status \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

1. **–°–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞ –≤ Telegram** (@BotFather)
2. **–ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω** –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ `.env`
3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å**:
   ```bash
   npm install node-telegram-bot-api
   ```
4. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä** (–±–æ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
5. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏** –Ω–∞ –Ω–∞–ª–∏—á–∏–µ `‚úÖ Telegram –±–æ—Ç –∑–∞–ø—É—â–µ–Ω`

## üìù –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### v1.0 (—Ç–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è)
- ‚úÖ –ü—Ä–∏–≤—è–∑–∫–∞ –ª–∏—á–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ Telegram
- ‚úÖ –°–∏—Å—Ç–µ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ /start
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞–º–∏ –ø—Ä–∏–≤—è–∑–∫–∏ (15 –º–∏–Ω TTL)
- ‚úÖ Polling –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ

### –£–¥–∞–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- ‚ùå –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã –≤ `/api/test/` (–±—ã–ª–∏ –º–µ—Ä—Ç–≤—ã–º –∫–æ–¥–æ–º)
- ‚ùå `/api/test-telegram.js` (–±—ã–ª –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º)

## ü§ù Support

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ Telegram-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `TELEGRAM_BOT_TOKEN` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω: `‚úÖ Telegram –±–æ—Ç –∑–∞–ø—É—â–µ–Ω`
4. –ö–æ–Ω—Ç–∞–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏: @FOHOWadmin –≤ Telegram

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 16 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—á–∞—è —Å–∏—Å—Ç–µ–º–∞
